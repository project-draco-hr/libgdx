{
  if (dx > 0.0f) {
    if (state != WALKING_RIGHT) {
      setState(WALKING_RIGHT);
    }
  }
 else   if (dx < 0.0f) {
    if (state != WALKING_LEFT) {
      setState(WALKING_LEFT);
    }
  }
 else   if (state == WALKING_RIGHT) {
    setState(FACING_RIGHT);
  }
 else   if (state == WALKING_LEFT) {
    setState(FACING_LEFT);
  }
  stateTime+=delta;
  float d=delta * SPEED;
  x+=dx * d;
  y+=dy * d;
}
