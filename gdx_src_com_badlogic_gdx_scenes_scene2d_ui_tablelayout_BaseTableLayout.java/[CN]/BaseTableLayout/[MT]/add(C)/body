{
  Cell cell=new Cell(this);
  cell.widget=widget;
  widgetToCell.put(widget,cell);
  for (  Entry<String,C> entry : nameToWidget.entrySet()) {
    if (widget == entry.getValue()) {
      cell.name=entry.getKey();
      break;
    }
  }
  if (cells.size() > 0) {
    Cell lastCell=cells.get(cells.size() - 1);
    if (!lastCell.endRow) {
      cell.column=lastCell.column + lastCell.colspan;
      cell.row=lastCell.row;
    }
 else     cell.row=lastCell.row + 1;
    if (cell.row > 0) {
      outer:       for (int i=cells.size() - 1; i >= 0; i--) {
        Cell other=cells.get(i);
        for (int column=other.column, nn=column + other.colspan; column < nn; column++) {
          if (other.column == cell.column) {
            cell.cellAboveIndex=i;
            break outer;
          }
        }
      }
    }
  }
  cells.add(cell);
  if (cell.column < columnDefaults.size()) {
    Cell columnDefaults=this.columnDefaults.get(cell.column);
    cell.set(columnDefaults != null ? columnDefaults : cellDefaults);
  }
 else   cell.set(cellDefaults);
  cell.merge(rowDefaults);
  toolkit.addChild(table,widget,null);
  return cell;
}
