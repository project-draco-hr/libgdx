{
  if (httpRequest.getUrl() == null) {
    httpResultListener.failed(new GdxRuntimeException("can't process a HTTP request without URL set"));
    return;
  }
  try {
    String value=httpRequest.getContent();
    String method=httpRequest.getMethod();
    URL url;
    if (method.equalsIgnoreCase(HttpMethods.GET))     url=new URL(httpRequest.getUrl() + "?" + value);
 else     url=new URL(httpRequest.getUrl());
    final HttpURLConnection connection=(HttpURLConnection)url.openConnection();
    connection.setDoOutput(true);
    connection.setDoInput(true);
    connection.setRequestMethod(method);
    Map<String,String> content=httpRequest.getHeaders();
    Set<String> keySet=content.keySet();
    for (    String name : keySet) {
      connection.addRequestProperty(name,content.get(name));
    }
    connection.setConnectTimeout(httpRequest.getTimeOut());
    connection.setReadTimeout(httpRequest.getTimeOut());
    if (!method.equalsIgnoreCase(HttpMethods.GET)) {
      OutputStreamWriter wr=new OutputStreamWriter(connection.getOutputStream());
      wr.write(value);
      wr.flush();
      wr.close();
    }
    executorService.submit(new Runnable(){
      @Override public void run(){
        try {
          connection.connect();
          Gdx.app.postRunnable(new Runnable(){
            @Override public void run(){
              try {
                httpResultListener.handleHttpResponse(new HttpClientResponse(connection));
              }
 catch (              IOException e) {
                httpResultListener.failed(e);
                connection.disconnect();
              }
            }
          }
);
        }
 catch (        final Exception e) {
          Gdx.app.postRunnable(new Runnable(){
            @Override public void run(){
              httpResultListener.failed(e);
              connection.disconnect();
            }
          }
);
        }
      }
    }
);
  }
 catch (  Exception e) {
    httpResultListener.failed(e);
    return;
  }
}
