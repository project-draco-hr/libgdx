{
  if (httpRequest.getUrl() == null) {
    httpResultListener.failed(new GdxRuntimeException("can't process a HTTP request without URL set"));
    return;
  }
  final boolean is_get=(httpRequest.getMethod() == HttpMethods.GET);
  final String value=httpRequest.convertHttpRequest();
  final RequestBuilder builder=is_get ? new RequestBuilder(RequestBuilder.GET,httpRequest.getUrl() + "?" + value) : new RequestBuilder(RequestBuilder.POST,httpRequest.getUrl());
  Map<String,String> content=httpRequest.getHeaders();
  Set<String> keySet=content.keySet();
  for (  String name : keySet) {
    builder.setHeader(name,content.get(name));
  }
  builder.setTimeoutMillis(httpRequest.getTimeout());
  try {
    Gdx.app.postRunnable(new Runnable(){
      @Override public void run(){
        try {
          builder.sendRequest(is_get ? null : value,new RequestCallback(){
            @Override public void onResponseReceived(            Request request,            Response response){
              httpResultListener.handleHttpResponse(new HttpClientResponse(response));
            }
            @Override public void onError(            Request request,            Throwable exception){
              httpResultListener.failed(exception);
            }
          }
);
        }
 catch (        RequestException e) {
          httpResultListener.failed(e);
        }
      }
    }
);
  }
 catch (  final Exception e) {
    Gdx.app.postRunnable(new Runnable(){
      @Override public void run(){
        httpResultListener.failed(e);
      }
    }
);
  }
}
