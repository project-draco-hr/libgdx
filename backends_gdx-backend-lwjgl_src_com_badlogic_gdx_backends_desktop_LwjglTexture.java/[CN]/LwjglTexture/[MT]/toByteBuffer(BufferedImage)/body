{
  if (imageBuffer == null || imageBuffer.capacity() / 4 < image.getWidth() * image.getHeight()) {
    imageBuffer=ByteBuffer.allocateDirect(image.getWidth() * image.getHeight() * 4);
    imageBuffer.order(ByteOrder.LITTLE_ENDIAN);
  }
  imageBuffer.clear();
  try {
    new TextureDataSource(image).decode(imageBuffer);
    imageBuffer.flip();
    return imageBuffer;
  }
 catch (  IOException e) {
    throw new GdxRuntimeException("couldn't decode image");
  }
}
