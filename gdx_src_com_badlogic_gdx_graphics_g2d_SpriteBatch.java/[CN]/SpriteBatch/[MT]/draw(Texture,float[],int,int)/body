{
  if (!drawing)   throw new IllegalStateException("SpriteBatch.begin must be called before draw.");
  if (texture != lastTexture) {
    renderMesh();
    lastTexture=texture;
    invTexWidth=1.0f / texture.getWidth();
    invTexHeight=1.0f / texture.getHeight();
  }
  int remainingVertices=vertices.length - idx;
  if (remainingVertices == 0) {
    renderMesh();
    remainingVertices=vertices.length;
  }
  int vertexCount=Math.min(remainingVertices,length - offset);
  System.arraycopy(spriteVertices,offset,vertices,idx,vertexCount);
  offset+=vertexCount;
  idx+=vertexCount;
  while (offset < length) {
    renderMesh();
    vertexCount=Math.min(vertices.length,length - offset);
    System.arraycopy(spriteVertices,offset,vertices,0,vertexCount);
    offset+=vertexCount;
    idx+=vertexCount;
  }
}
