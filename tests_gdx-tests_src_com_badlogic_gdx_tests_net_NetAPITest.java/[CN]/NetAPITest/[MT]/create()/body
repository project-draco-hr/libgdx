{
  batch=new SpriteBatch();
  skin=new Skin(Gdx.files.internal("data/uiskin.json"));
  font=new BitmapFont();
  stage=new Stage(Gdx.graphics.getWidth(),Gdx.graphics.getHeight(),false);
  Gdx.input.setInputProcessor(stage);
{
    statusLabel=new Label("",skin);
    statusLabel.setWrap(true);
    statusLabel.setWidth(Gdx.graphics.getWidth() * 0.96f);
    statusLabel.setAlignment(Align.center);
    statusLabel.setPosition(Gdx.graphics.getWidth() * 0.5f - statusLabel.getWidth() * 0.5f,30f);
    statusLabel.setColor(Color.CYAN);
    stage.addActor(statusLabel);
  }
{
    ClickListener clickListener=new ClickListener(){
      @Override public void clicked(      InputEvent event,      float x,      float y){
        super.clicked(event,x,y);
        doImageDownload=event.getListenerActor() == textButton;
        textButton.setDisabled(true);
        textButton.setTouchable(Touchable.disabled);
        textButtonTxt.setDisabled(true);
        textButtonTxt.setTouchable(Touchable.disabled);
        if (texture != null)         texture.dispose();
        texture=null;
        text=null;
        HttpRequest httpRequest=new HttpRequest(Net.HttpMethods.GET);
        if (doImageDownload)         httpRequest.setUrl("http://i.imgur.com/vxomF.jpg");
 else         httpRequest.setUrl("http://www.apache.org/licenses/LICENSE-2.0.txt");
        Gdx.net.sendHttpRequest(httpRequest,NetAPITest.this);
        statusLabel.setText("Downloading data from " + httpRequest.getUrl());
      }
    }
;
    textButton=new TextButton("Download image",skin);
    textButton.setPosition(Gdx.graphics.getWidth() * 0.5f - textButton.getWidth(),60f);
    textButton.addListener(clickListener);
    stage.addActor(textButton);
    textButtonTxt=new TextButton("Download text",skin);
    textButtonTxt.setPosition(Gdx.graphics.getWidth() * 0.5f,60f);
    textButtonTxt.addListener(clickListener);
    stage.addActor(textButtonTxt);
  }
}
