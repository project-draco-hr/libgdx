{
  int numRectanglesToProcess=freeRectangles.size;
  for (int i=0; i < numRectanglesToProcess; i++) {
    if (SplitFreeNode(freeRectangles.get(i),node)) {
      freeRectangles.removeIndex(i);
      --i;
      --numRectanglesToProcess;
    }
  }
  PruneFreeList();
  usedRectangles.add(node);
}
