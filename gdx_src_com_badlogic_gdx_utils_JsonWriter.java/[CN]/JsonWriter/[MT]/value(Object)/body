{
  if (quoteLongValues && (value instanceof Long || value instanceof Double || value instanceof BigDecimal|| value instanceof BigInteger)) {
    value=String.valueOf(value);
  }
 else   if (value instanceof Number) {
    Number number=(Number)value;
    long longValue=number.longValue();
    if (number.doubleValue() == longValue)     value=longValue;
  }
  if (current != null) {
    if (current.array) {
      if (!current.needsComma)       current.needsComma=true;
 else       writer.write(',');
    }
 else {
      if (!named)       throw new IllegalStateException("Name must be set.");
      named=false;
    }
  }
  writer.write(outputType.quoteValue(value));
  return this;
}
