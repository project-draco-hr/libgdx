{
  glfwDefaultWindowHints();
  glfwWindowHint(GLFW_VISIBLE,GLFW_FALSE);
  glfwWindowHint(GLFW_RESIZABLE,config.windowResizable ? GLFW_TRUE : GLFW_FALSE);
  if (sharedContextWindow == 0) {
    glfwWindowHint(GLFW_RED_BITS,config.r);
    glfwWindowHint(GLFW_GREEN_BITS,config.g);
    glfwWindowHint(GLFW_BLUE_BITS,config.b);
    glfwWindowHint(GLFW_ALPHA_BITS,config.a);
    glfwWindowHint(GLFW_STENCIL_BITS,config.stencil);
    glfwWindowHint(GLFW_DEPTH_BITS,config.depth);
    glfwWindowHint(GLFW_SAMPLES,config.samples);
  }
  long windowHandle=0;
  if (config.fullscreenMode != null) {
    windowHandle=glfwCreateWindow(config.fullscreenMode.width,config.fullscreenMode.height,config.title,config.fullscreenMode.getMonitor(),sharedContextWindow);
  }
 else {
    windowHandle=glfwCreateWindow(config.windowWidth,config.windowHeight,config.title,0,sharedContextWindow);
  }
  if (windowHandle == 0) {
    throw new GdxRuntimeException("Couldn't create window");
  }
  if (config.fullscreenMode != null) {
    if (config.windowX == -1 && config.windowY == -1) {
      GLFWVidMode vidMode=glfwGetVideoMode(glfwGetPrimaryMonitor());
      glfwSetWindowPos(windowHandle,vidMode.width() / 2 - config.windowWidth / 2,vidMode.height() / 2 - config.windowHeight / 2);
    }
 else {
      glfwSetWindowPos(windowHandle,config.windowX,config.windowHeight);
    }
  }
  glfwSwapInterval(config.vSyncEnabled ? 1 : 0);
  glfwMakeContextCurrent(windowHandle);
  GL.createCapabilities();
  String version=GL11.glGetString(GL20.GL_VERSION);
  int glMajorVersion=Integer.parseInt("" + version.charAt(0));
  if (glMajorVersion <= 1)   throw new GdxRuntimeException("OpenGL 2.0 or higher with the FBO extension is required. OpenGL version: " + version);
  if (glMajorVersion == 2 || version.contains("2.1")) {
    if (glfwExtensionSupported("GL_EXT_framebuffer_object") == GLFW_FALSE && glfwExtensionSupported("GL_ARB_framebuffer_object") == GLFW_FALSE) {
      throw new GdxRuntimeException("OpenGL 2.0 or higher with the FBO extension is required. OpenGL version: " + version + ", FBO extension: false");
    }
  }
  for (int i=0; i < 2; i++) {
    GL11.glClearColor(config.initialBackgroundColor.r,config.initialBackgroundColor.g,config.initialBackgroundColor.b,config.initialBackgroundColor.a);
    GL11.glClear(GL11.GL_COLOR_BUFFER_BIT);
    glfwSwapBuffers(windowHandle);
  }
  return windowHandle;
}
