{
  if (this.image != null)   return null;
  if (child1 != null) {
    Node newNode=child1.insert(image,canvas,rotate);
    if (newNode != null)     return newNode;
    return child2.insert(image,canvas,rotate);
  }
  int imageWidth=image.getWidth();
  int imageHeight=image.getHeight();
  if (rotate) {
    int temp=imageWidth;
    imageWidth=imageHeight;
    imageHeight=temp;
  }
  int neededWidth=imageWidth + xPadding;
  int neededHeight=imageHeight + yPadding;
  if (neededWidth > width || neededHeight > height)   return null;
  if (neededWidth == width && neededHeight == height) {
    this.image=image;
    image.rotate=rotate;
    write(canvas);
    return this;
  }
  int dw=width - neededWidth;
  int dh=height - neededHeight;
  if (dw > dh) {
    child1=new Node(left,top,neededWidth,height);
    child2=new Node(left + neededWidth,top,width - neededWidth,height);
  }
 else {
    child1=new Node(left,top,width,neededHeight);
    child2=new Node(left,top + neededHeight,width,height - neededHeight);
  }
  return child1.insert(image,canvas,rotate);
}
