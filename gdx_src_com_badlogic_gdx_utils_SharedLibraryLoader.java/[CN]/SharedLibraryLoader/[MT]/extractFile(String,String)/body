{
  try {
    String sourceCrc=crc(readFile(sourcePath));
    if (dirName == null)     dirName=sourceCrc;
    File extractedDir=new File(System.getProperty("java.io.tmpdir") + "/libgdx" + System.getProperty("user.name")+ "/"+ dirName);
    File extractedFile=new File(extractedDir,new File(sourcePath).getName());
    String extractedCrc=null;
    if (extractedFile.exists()) {
      try {
        extractedCrc=crc(new FileInputStream(extractedFile));
      }
 catch (      FileNotFoundException ignored) {
      }
    }
    if (extractedCrc == null || !extractedCrc.equals(sourceCrc)) {
      try {
        InputStream input=readFile(sourcePath);
        extractedDir.mkdirs();
        FileOutputStream output=new FileOutputStream(extractedFile);
        byte[] buffer=new byte[4096];
        while (true) {
          int length=input.read(buffer);
          if (length == -1)           break;
          output.write(buffer,0,length);
        }
        input.close();
        output.close();
      }
 catch (      IOException ex) {
        throw new GdxRuntimeException("Error extracting file: " + sourcePath,ex);
      }
    }
    return extractedFile;
  }
 catch (  RuntimeException ex) {
    File file=new File(System.getProperty("java.library.path"),sourcePath);
    if (file.exists())     return file;
    throw ex;
  }
}
