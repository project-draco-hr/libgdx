{
  GlyphRun truncateRun=glyphRunPool.obtain();
  fontData.getGlyphs(truncateRun,truncate,0,truncate.length());
  float truncateWidth=0;
  for (int i=1, n=truncateRun.xAdvances.size; i < n; i++)   truncateWidth+=truncateRun.xAdvances.get(i);
  targetWidth-=truncateWidth;
  run.width=0;
  int count=0;
  while (true) {
    float xAdvance=run.xAdvances.get(count);
    if (run.width + xAdvance > targetWidth)     break;
    run.width+=xAdvance;
    count++;
  }
  run.xAdvances.truncate(count);
  if (count > 1) {
    run.glyphs.truncate(count - 1);
    adjustLastGlyph(fontData,run);
    run.xAdvances.addAll(truncateRun.xAdvances,1,truncateRun.xAdvances.size - 1);
  }
 else {
    run.glyphs.clear();
    run.xAdvances.clear();
    run.xAdvances.addAll(truncateRun.xAdvances);
    run.width+=truncateRun.xAdvances.get(0);
  }
  run.glyphs.addAll(truncateRun.glyphs);
  run.width+=truncateWidth;
  glyphRunPool.free(truncateRun);
}
