{
  super(tileSet);
  image=ImageIO.read(baseDir.child(tileSet.imageName).read());
  imageTilePositions=new IntMap<Vector2>();
  int x, y, tile=0;
  numRows=0;
  numCols=0;
  int stopWidth=image.getWidth() - tileSet.tileWidth;
  int stopHeight=image.getHeight() - tileSet.tileHeight;
  for (y=tileSet.margin; y < stopHeight; y+=tileSet.tileHeight + tileSet.spacing) {
    for (x=tileSet.margin; x < stopWidth; x+=tileSet.tileWidth + tileSet.spacing) {
      if (y == tileSet.margin)       numCols++;
      imageTilePositions.put(tile,new Vector2(x,y));
      tile++;
    }
    numRows++;
  }
  numTiles=numRows * numCols;
}
