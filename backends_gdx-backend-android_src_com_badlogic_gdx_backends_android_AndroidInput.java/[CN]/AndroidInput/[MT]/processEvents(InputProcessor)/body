{
synchronized (this) {
    if (listener != null) {
      int len=keyEvents.size();
      for (int i=0; i < len; i++) {
        KeyEvent e=keyEvents.get(i);
switch (e.type) {
case KeyEvent.KEY_DOWN:
          listener.keyDown(e.keyCode);
        break;
case KeyEvent.KEY_UP:
      listener.keyUp(e.keyCode);
    break;
case KeyEvent.KEY_TYPED:
  listener.keyTyped(e.keyChar);
}
freeKeyEvents.free(e);
}
len=touchEvents.size();
for (int i=0; i < len; i++) {
TouchEvent e=touchEvents.get(i);
switch (e.type) {
case TouchEvent.TOUCH_DOWN:
listener.touchDown(e.x,e.y,e.pointer);
break;
case TouchEvent.TOUCH_UP:
listener.touchUp(e.x,e.y,e.pointer);
break;
case TouchEvent.TOUCH_DRAGGED:
listener.touchDragged(e.x,e.y,e.pointer);
}
freeTouchEvents.free(e);
}
}
keyEvents.clear();
touchEvents.clear();
}
}
