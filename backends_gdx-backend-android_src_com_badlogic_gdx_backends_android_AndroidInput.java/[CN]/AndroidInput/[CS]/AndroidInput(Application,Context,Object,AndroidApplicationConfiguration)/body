{
  if (view instanceof View) {
    View v=(View)view;
    v.setOnKeyListener(this);
    v.setOnTouchListener(this);
    v.setFocusable(true);
    v.setFocusableInTouchMode(true);
    v.requestFocus();
    v.requestFocusFromTouch();
  }
  this.config=config;
  this.onscreenKeyboard=new AndroidOnscreenKeyboard(context,new Handler(),this);
  for (int i=0; i < realId.length; i++)   realId[i]=-1;
  handle=new Handler();
  this.app=activity;
  this.context=context;
  this.sleepTime=config.touchSleepTime;
  int sdkVersion=Integer.parseInt(android.os.Build.VERSION.SDK);
  if (sdkVersion >= 5)   touchHandler=new AndroidMultiTouchHandler();
 else   touchHandler=new AndroidSingleTouchHandler();
  hasMultitouch=touchHandler.supportsMultitouch(context);
  vibrator=(Vibrator)context.getSystemService(Context.VIBRATOR_SERVICE);
  int rotation=getRotation();
  DisplayMode mode=app.getGraphics().getDesktopDisplayMode();
  if (((rotation == 0 || rotation == 180) && (mode.width >= mode.height)) || ((rotation == 90 || rotation == 270) && (mode.width <= mode.height))) {
    nativeOrientation=Orientation.Landscape;
  }
 else {
    nativeOrientation=Orientation.Portrait;
  }
}
