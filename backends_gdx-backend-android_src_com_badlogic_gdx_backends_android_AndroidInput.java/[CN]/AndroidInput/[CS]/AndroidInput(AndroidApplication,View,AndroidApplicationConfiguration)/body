{
  view.setOnKeyListener(this);
  view.setOnTouchListener(this);
  view.setFocusable(true);
  view.setFocusableInTouchMode(true);
  view.requestFocus();
  view.requestFocusFromTouch();
  this.config=config;
  this.onscreenKeyboard=new AndroidOnscreenKeyboard(activity,new Handler(),this);
  for (int i=0; i < realId.length; i++)   realId[i]=-1;
  handle=new Handler();
  this.app=activity;
  this.sleepTime=config.touchSleepTime;
  int sdkVersion=Integer.parseInt(android.os.Build.VERSION.SDK);
  if (sdkVersion >= 5)   touchHandler=new AndroidMultiTouchHandler();
 else   touchHandler=new AndroidSingleTouchHandler();
  hasMultitouch=touchHandler.supportsMultitouch((AndroidApplication)app);
  vibrator=(Vibrator)activity.getSystemService(Context.VIBRATOR_SERVICE);
  int rotation=getRotation();
  DisplayMode mode=app.graphics.getDesktopDisplayMode();
  if (((rotation == 0 || rotation == 180) && (mode.width >= mode.height)) || ((rotation == 90 || rotation == 270) && (mode.width <= mode.height))) {
    nativeOrientation=Orientation.Landscape;
  }
 else {
    nativeOrientation=Orientation.Portrait;
  }
}
