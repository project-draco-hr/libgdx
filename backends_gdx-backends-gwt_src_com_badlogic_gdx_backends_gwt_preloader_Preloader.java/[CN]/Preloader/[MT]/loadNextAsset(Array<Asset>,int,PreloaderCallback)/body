{
  if (next == assets.size) {
    callback.done();
    return;
  }
  final Asset asset=assets.get(next);
  if (asset.type == AssetType.Text) {
    new TextLoader(baseUrl + asset.url,new LoaderCallback<String>(){
      @Override public void success(      String result){
        texts.put(asset.url,result);
        callback.loaded(asset.url,next + 1,assets.size);
        loadNextAsset(assets,next + 1,callback);
      }
      @Override public void error(){
        callback.error(asset.url);
        loadNextAsset(assets,next + 1,callback);
      }
    }
);
  }
  if (asset.type == AssetType.Image) {
    new ImageLoader(baseUrl + asset.url,new LoaderCallback<ImageElement>(){
      @Override public void success(      ImageElement result){
        images.put(asset.url,result);
        callback.loaded(asset.url,next + 1,assets.size);
        loadNextAsset(assets,next + 1,callback);
      }
      @Override public void error(){
        callback.error(asset.url);
        loadNextAsset(assets,next + 1,callback);
      }
    }
);
  }
  if (asset.type == AssetType.Binary) {
    new BinaryLoader(baseUrl + asset.url,new LoaderCallback<Blob>(){
      @Override public void success(      Blob result){
        binaries.put(asset.url,result);
        callback.loaded(asset.url,next + 1,assets.size);
        loadNextAsset(assets,next + 1,callback);
      }
      @Override public void error(){
        callback.error(asset.url);
        loadNextAsset(assets,next + 1,callback);
      }
    }
);
  }
}
