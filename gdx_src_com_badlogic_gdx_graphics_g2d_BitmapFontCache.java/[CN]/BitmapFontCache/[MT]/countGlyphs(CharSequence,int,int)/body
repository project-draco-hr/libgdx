{
  int count=end - start;
  while (start < end) {
    char ch=seq.charAt(start++);
    if (ch == '[') {
      count--;
      if (!(start < end && seq.charAt(start) == '[')) {
        while (start < end && seq.charAt(start) != ']') {
          start++;
          count--;
        }
        count--;
      }
      start++;
    }
  }
  return count;
}
