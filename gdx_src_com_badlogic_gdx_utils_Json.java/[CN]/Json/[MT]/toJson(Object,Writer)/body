{
  if (!(writer instanceof JsonWriter)) {
    this.writer=new JsonWriter(writer);
    ((JsonWriter)this.writer).setOutputType(outputType);
  }
  try {
    writeValue(object,object.getClass(),null);
  }
 catch (  IOException ex) {
    throw new SerializationException("Error writing JSON.",ex);
  }
}
