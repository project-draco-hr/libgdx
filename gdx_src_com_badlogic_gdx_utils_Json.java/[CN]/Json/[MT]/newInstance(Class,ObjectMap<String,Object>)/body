{
  String className=typeName == null ? null : (String)map.remove(typeName);
  if (className != null) {
    try {
      type=Class.forName(className);
    }
 catch (    ClassNotFoundException ex) {
      type=tagToClass.get(className);
      if (type == null)       throw new SerializationException(ex);
    }
  }
  return newInstance(type);
}
