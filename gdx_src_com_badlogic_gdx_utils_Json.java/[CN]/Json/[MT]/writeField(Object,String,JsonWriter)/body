{
  ObjectMap<String,Field> fields=typeToFields.get(object.getClass());
  if (fields == null)   fields=cacheFields(object.getClass());
  Field field=fields.get(name);
  if (field == null)   throw new SerializationException("Field not found: " + name + " ("+ object.getClass().getName()+ ")");
  try {
    if (debug)     System.out.println("Writing field: " + field.getName() + " ("+ object.getClass().getName()+ ")");
    writeValue(field.getName(),field.get(object),field.getType(),writer);
  }
 catch (  IllegalAccessException ex) {
    throw new SerializationException("Error accessing field: " + field.getName() + " ("+ object.getClass().getName()+ ")",ex);
  }
catch (  SerializationException ex) {
    ex.addTrace(field + " (" + object.getClass().getName()+ ")");
    throw ex;
  }
catch (  RuntimeException runtimeEx) {
    SerializationException ex=new SerializationException(runtimeEx);
    ex.addTrace(field + " (" + object.getClass().getName()+ ")");
    throw ex;
  }
}
