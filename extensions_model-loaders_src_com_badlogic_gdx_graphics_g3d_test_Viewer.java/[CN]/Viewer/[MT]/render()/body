{
  Gdx.gl.glClearColor(0.2f,0.2f,0.2f,1);
  Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
  Gdx.gl.glEnable(GL10.GL_DEPTH_TEST);
  Gdx.gl.glEnable(GL10.GL_TEXTURE_2D);
  Gdx.gl.glEnable(GL10.GL_LIGHTING);
  Gdx.gl.glEnable(GL10.GL_COLOR_MATERIAL);
  cam.update();
  cam.apply(Gdx.gl10);
  Gdx.gl.glEnable(GL10.GL_LIGHT0);
  Gdx.gl10.glLightfv(GL10.GL_LIGHT0,GL10.GL_DIFFUSE,lightColor,0);
  Gdx.gl10.glLightfv(GL10.GL_LIGHT0,GL10.GL_POSITION,lightPosition,0);
  angle+=45 * Gdx.graphics.getDeltaTime();
  long processingTime=0;
  for (int i=0; i < NUM_INSTANCES; i++) {
    model.setAnimation(animation,time);
    model.render();
  }
  Gdx.gl.glDisable(GL10.GL_LIGHTING);
  Gdx.gl.glDisable(GL10.GL_DEPTH_TEST);
  Gdx.gl.glDisable(GL10.GL_TEXTURE_2D);
  renderSkeleton();
  Gdx.app.log("Skinning","took: " + processingTime / 1000000000.0f + " secs");
  batch.begin();
  font.draw(batch,"Touch to switch Animation, Animation: " + animation + ", FPS: "+ Gdx.graphics.getFramesPerSecond(),10,30);
  batch.end();
  if (Gdx.input.justTouched()) {
    currAnimIdx++;
    if (currAnimIdx == animNames.size())     currAnimIdx=0;
    animation=animNames.get(currAnimIdx);
    time=0;
  }
  time+=Gdx.graphics.getDeltaTime() / 10;
  if (time > model.skeleton.animations.get(animation).duration) {
    time=0;
  }
}
