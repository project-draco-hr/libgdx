{
  GL10 gl=Gdx.graphics.getGL10();
  gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
  gl.glViewport(0,0,Gdx.graphics.getWidth(),Gdx.graphics.getHeight());
  renderBackground();
  gl.glDisable(GL10.GL_DITHER);
  gl.glEnable(GL10.GL_DEPTH_TEST);
  gl.glEnable(GL10.GL_CULL_FACE);
  setProjectionAndCamera(gl,simulation.ship);
  setLighting(gl);
  gl.glEnable(GL10.GL_TEXTURE_2D);
  renderShip(gl,simulation.ship);
  renderInvaders(gl,simulation.invaders);
  gl.glDisable(GL10.GL_TEXTURE_2D);
  renderBlocks(gl,simulation.blocks);
  gl.glDisable(GL10.GL_LIGHTING);
  renderShots(gl,simulation.shots);
  gl.glEnable(GL10.GL_TEXTURE_2D);
  renderExplosions(gl,simulation.explosions);
  gl.glDisable(GL10.GL_CULL_FACE);
  gl.glDisable(GL10.GL_DEPTH_TEST);
  spriteBatch.setProjectionMatrix(viewMatrix);
  spriteBatch.setTransformMatrix(transformMatrix);
  spriteBatch.begin();
  if (simulation.ship.lives != lastLives || simulation.score != lastScore || simulation.wave != lastWave) {
    status="lives: " + simulation.ship.lives + " wave: "+ simulation.wave+ " score: "+ simulation.score;
    lastLives=simulation.ship.lives;
    lastScore=simulation.score;
    lastWave=simulation.wave;
  }
  spriteBatch.enableBlending();
  spriteBatch.setBlendFunction(GL10.GL_ONE,GL10.GL_ONE_MINUS_SRC_ALPHA);
  font.draw(spriteBatch,status,0,320);
  spriteBatch.end();
  invaderAngle+=delta * 90;
  if (invaderAngle > 360)   invaderAngle-=360;
}
