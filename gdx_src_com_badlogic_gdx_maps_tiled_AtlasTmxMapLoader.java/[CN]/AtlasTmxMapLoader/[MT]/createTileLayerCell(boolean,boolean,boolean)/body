{
  Cell cell=new Cell();
  if (flipDiagonally) {
    if (flipHorizontally && flipVertically) {
      cell.setFlipHorizontally(true);
      cell.setRotation(yUp ? Cell.ROTATE_270 : Cell.ROTATE_90);
    }
 else     if (flipHorizontally) {
      cell.setRotation(yUp ? Cell.ROTATE_270 : Cell.ROTATE_90);
    }
 else     if (flipVertically) {
      cell.setRotation(yUp ? Cell.ROTATE_90 : Cell.ROTATE_270);
    }
 else {
      cell.setFlipVertically(true);
      cell.setRotation(yUp ? Cell.ROTATE_270 : Cell.ROTATE_90);
    }
  }
 else {
    cell.setFlipHorizontally(flipHorizontally);
    cell.setFlipVertically(flipVertically);
  }
  return cell;
}
