{
  File inputDir=new File(input);
  File outputDir=new File(output);
  if (!inputDir.isDirectory()) {
    System.out.println("Not a directory: " + inputDir);
    return;
  }
  File packFile=new File(outputDir,"pack");
  packFile.delete();
  File incrmentalFile=null;
  if (settings.incremental) {
    settings.crcs.clear();
    incrmentalFile=new File(System.getProperty("user.home") + "/.texturepacker/" + hash(inputDir.getAbsolutePath()));
    if (incrmentalFile.exists()) {
      BufferedReader reader=new BufferedReader(new FileReader(incrmentalFile));
      while (true) {
        String path=reader.readLine();
        if (path == null)         break;
        String crc=reader.readLine();
        if (crc == null)         break;
        settings.crcs.put(path,Long.parseLong(crc));
      }
      reader.close();
    }
  }
  process(settings,inputDir,outputDir,packFile);
  if (settings.incremental) {
    incrmentalFile.getParentFile().mkdirs();
    FileWriter writer=new FileWriter(incrmentalFile);
    for (    Entry<String,Long> entry : settings.crcs.entrySet()) {
      writer.write(entry.getKey() + "\n");
      writer.write(entry.getValue() + "\n");
    }
    writer.close();
  }
}
