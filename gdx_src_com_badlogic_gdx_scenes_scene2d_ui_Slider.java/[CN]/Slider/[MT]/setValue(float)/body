{
  if (value < min || value > max)   throw new IllegalArgumentException("value must be >= min and <= max: " + value);
  value=MathUtils.clamp(Math.round(value / stepSize) * stepSize,min,max);
  float oldValue=this.value;
  if (value == oldValue)   return;
  float oldVisualValue=getVisualValue();
  this.value=value;
  ChangeEvent changeEvent=Pools.obtain(ChangeEvent.class);
  if (fire(changeEvent))   this.value=oldValue;
 else   if (animateDuration > 0) {
    animateFromValue=oldVisualValue;
    animateTime=animateDuration;
  }
  Pools.free(changeEvent);
}
