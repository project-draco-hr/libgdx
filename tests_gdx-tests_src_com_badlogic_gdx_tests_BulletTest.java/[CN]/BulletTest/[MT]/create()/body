{
  Gdx.input.setInputProcessor(this);
  groundMesh=new Mesh(true,4,6,new VertexAttribute(Usage.Position,3,"a_position"),new VertexAttribute(Usage.ColorPacked,4,"a_color"));
  groundMesh.setVertices(new float[]{20f,0f,20f,Color.toFloatBits(128,128,128,255),20f,0f,-20f,Color.toFloatBits(128,128,128,255),-20f,0f,20f,Color.toFloatBits(128,128,128,255),-20f,0f,-20f,Color.toFloatBits(128,128,128,255)});
  groundMesh.setIndices(new short[]{0,1,2,1,2,3});
  boxMesh=new Mesh(true,8,36,new VertexAttribute(Usage.Position,3,"a_position"),new VertexAttribute(Usage.ColorPacked,4,"a_color"));
  boxMesh.setVertices(new float[]{0.5f,0.5f,0.5f,Color.toFloatBits(255,0,0,255),0.5f,0.5f,-0.5f,Color.toFloatBits(255,0,0,255),-0.5f,0.5f,0.5f,Color.toFloatBits(255,0,0,255),-0.5f,0.5f,-0.5f,Color.toFloatBits(255,0,0,255),0.5f,-0.5f,0.5f,Color.toFloatBits(255,0,0,255),0.5f,-0.5f,-0.5f,Color.toFloatBits(255,0,0,255),-0.5f,-0.5f,0.5f,Color.toFloatBits(255,0,0,255),-0.5f,-0.5f,-0.5f,Color.toFloatBits(255,0,0,255)});
  boxMesh.setIndices(new short[]{0,1,2,1,2,3,4,5,6,5,6,7,0,2,4,4,6,2,1,3,5,5,7,3,2,3,6,6,7,3,0,1,4,4,5,1});
  collisionConfiguration=new btDefaultCollisionConfiguration();
  dispatcher=new btCollisionDispatcher(collisionConfiguration);
  broadphase=new btDbvtBroadphase();
  solver=new btSequentialImpulseConstraintSolver();
  dynamicsWorld=new btDiscreteDynamicsWorld(dispatcher,broadphase,solver,collisionConfiguration);
  dynamicsWorld.setGravity(gravity);
  groundInfo=new BulletBody.ConstructInfo(0f,40f,0f,40f);
  boxInfo=new BulletBody.ConstructInfo(1f,1f,1f,1f);
  BulletBody body=new BulletBody(groundMesh,groundInfo,0f,0f,0f);
  bodies.add(body);
  dynamicsWorld.addRigidBody(body.body);
  for (int x=0; x < BOXCOUNT_X; x++) {
    for (int y=0; y < BOXCOUNT_Y; y++) {
      for (int z=0; z < BOXCOUNT_Z; z++) {
        body=new BulletBody(boxMesh,boxInfo,BOXOFFSET_X + x,BOXOFFSET_Y + y,BOXOFFSET_Z + z);
        bodies.add(body);
        dynamicsWorld.addRigidBody(body.body);
      }
    }
  }
}
