{
  if (tempFolder != null && Gdx.app.getType() == ApplicationType.Desktop) {
    String prefix=DefaultShader.createPrefix(renderable,lighting,environmentCubemap,shadowMap,fog,numDirectional,numPoint,numSpot,numBones);
    Gdx.files.absolute(tempFolder).child(name + ".vertex.glsl").writeString(prefix + vertexShader,false);
    Gdx.files.absolute(tempFolder).child(name + ".fragment.glsl").writeString(prefix + fragmentShader,false);
  }
  BaseShader result=new MultiPassShader(vertexShader,fragmentShader,renderable,lighting,environmentCubemap,shadowMap,fog,numDirectional,numPoint,numSpot,numBones);
  if (tempFolder != null && Gdx.app.getType() == ApplicationType.Desktop)   Gdx.files.absolute(tempFolder).child(name + ".log.txt").writeString(result.program.getLog(),false);
  return result;
}
