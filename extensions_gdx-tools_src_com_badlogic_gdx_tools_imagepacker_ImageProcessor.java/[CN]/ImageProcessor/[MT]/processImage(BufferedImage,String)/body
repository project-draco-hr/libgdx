{
  if (image.getType() != BufferedImage.TYPE_4BYTE_ABGR) {
    BufferedImage newImage=new BufferedImage(image.getWidth(),image.getHeight(),BufferedImage.TYPE_4BYTE_ABGR);
    newImage.getGraphics().drawImage(image,0,0,null);
    image=newImage;
  }
  Rect rect=null;
  if (name.endsWith(".9")) {
    name=name.substring(0,name.length() - 2);
    int[] splits=getSplits(image,name);
    int[] pads=getPads(image,name,splits);
    BufferedImage newImage=new BufferedImage(image.getWidth() - 2,image.getHeight() - 2,BufferedImage.TYPE_4BYTE_ABGR);
    newImage.getGraphics().drawImage(image,0,0,newImage.getWidth(),newImage.getHeight(),1,1,image.getWidth() - 1,image.getHeight() - 1,null);
    image=newImage;
    rect=new Rect(image,0,0,image.getWidth(),image.getHeight(),true);
    rect.splits=splits;
    rect.pads=pads;
    rect.canRotate=false;
  }
 else {
    rect=stripWhitespace(image);
    if (rect == null)     return null;
  }
  int index=-1;
  if (settings.useIndexes) {
    Matcher matcher=indexPattern.matcher(name);
    if (matcher.matches()) {
      name=matcher.group(1);
      index=Integer.parseInt(matcher.group(2));
    }
  }
  rect.name=name;
  rect.index=index;
  return rect;
}
