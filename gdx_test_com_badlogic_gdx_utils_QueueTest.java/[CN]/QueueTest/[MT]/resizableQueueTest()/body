{
  final Queue<Integer> q=new Queue<Integer>(8,true);
  assertTrue("New queue is not empty!",q.isEmpty());
  for (int i=0; i < 100; i++) {
    for (int j=0; j < i; j++) {
      assertTrue("Failed to add element " + j + " ("+ i+ ")",q.add(j));
      final int size=q.size();
      assertTrue("Size should be " + (j + 1) + " but is "+ size+ " ("+ i+ ")",size == j + 1);
    }
    if (i != 0) {
      final Integer peek=q.peek();
      assertTrue("First thing is not zero but " + peek + " ("+ i+ ")",peek == 0);
    }
    for (int j=0; j < i; j++) {
      final Integer pop=q.remove();
      assertTrue("Popped should be " + j + " but is "+ pop+ " ("+ i+ ")",pop == j);
      final int size=q.size();
      assertTrue("Size should be " + (i - 1 - j) + " but is "+ size+ " ("+ i+ ")",size == i - 1 - j);
    }
    assertTrue("Not empty after cycle " + i,q.isEmpty());
  }
  for (int i=0; i < 56; i++) {
    q.add(42);
  }
  q.clear();
  assertTrue("Clear did not clear properly",q.isEmpty());
}
