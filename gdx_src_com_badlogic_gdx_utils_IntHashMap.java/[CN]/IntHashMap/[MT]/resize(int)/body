{
  Entry[] newTable=new Entry[newSize];
  Entry[] table=this.table;
  int bucketmask=newSize - 1;
  for (int i=0; i < table.length; i++) {
    Entry entry=table[i];
    if (entry != null) {
      table[i]=null;
      do {
        Entry next=entry.next;
        int index=entry.key & bucketmask;
        entry.next=newTable[index];
        newTable[index]=entry;
        entry=next;
      }
 while (entry != null);
    }
  }
  this.table=newTable;
  capacity=newSize;
  threshold=(int)(newSize * loadFactor);
  mask=capacity - 1;
}
