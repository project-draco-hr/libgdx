{
  final T[] values=this.values;
  int pushIndex=this.pushIndex;
  final int popIndex=this.popIndex;
  values[pushIndex]=object;
  pushIndex++;
  if (pushIndex == values.length) {
    pushIndex=0;
  }
  if (pushIndex == popIndex) {
    final int newSize=values.length << 1;
    final T[] newArray=(T[])ArrayReflection.newInstance(values.getClass().getComponentType(),newSize);
    final int currentSize=values.length;
    for (int i=0; i < currentSize; i++) {
      newArray[i]=values[(popIndex + i) % currentSize];
    }
    this.popIndex=0;
    pushIndex=currentSize;
    this.values=newArray;
  }
  this.pushIndex=pushIndex;
}
