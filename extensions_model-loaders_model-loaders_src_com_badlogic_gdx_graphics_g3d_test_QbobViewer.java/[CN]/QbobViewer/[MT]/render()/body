{
  Gdx.gl.glClearColor(0,0,0,1);
  Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
  cam.update();
  cam.apply(Gdx.gl10);
  Gdx.gl.glEnable(GL10.GL_CULL_FACE);
  Gdx.gl.glEnable(GL10.GL_DEPTH_TEST);
  Gdx.gl.glActiveTexture(GL10.GL_TEXTURE0);
  Gdx.gl.glEnable(GL10.GL_TEXTURE_2D);
  diffuse.bind();
  diffuse.setFilter(TextureFilter.MipMap,TextureFilter.Linear);
  Gdx.gl.glActiveTexture(GL10.GL_TEXTURE1);
  Gdx.gl.glEnable(GL10.GL_TEXTURE_2D);
  lightMaps[0].bind();
  lightMaps[0].setFilter(TextureFilter.MipMapNearestNearest,TextureFilter.Linear);
  setCombiners();
  model[0].render();
  lightMaps[1].bind();
  lightMaps[1].setFilter(TextureFilter.MipMapNearestNearest,TextureFilter.Linear);
  setCombiners();
  model[1].render();
  lightMaps[2].bind();
  lightMaps[2].setFilter(TextureFilter.MipMapNearestNearest,TextureFilter.Linear);
  setCombiners();
  model[2].render();
  lightMaps[3].bind();
  lightMaps[3].setFilter(TextureFilter.MipMapNearestNearest,TextureFilter.Linear);
  setCombiners();
  model[3].render();
  Gdx.gl.glActiveTexture(GL10.GL_TEXTURE1);
  Gdx.gl.glDisable(GL10.GL_TEXTURE_2D);
  Gdx.gl.glActiveTexture(GL10.GL_TEXTURE0);
  Gdx.gl.glDisable(GL10.GL_CULL_FACE);
  Gdx.gl11.glTexEnvi(GL11.GL_TEXTURE_ENV,GL11.GL_TEXTURE_ENV_MODE,GL11.GL_MODULATE);
  Gdx.gl.glDisable(GL10.GL_BLEND);
  animTime+=Gdx.graphics.getDeltaTime();
  if (animTime > anim.totalDuration - anim.frameDuration)   animTime=0;
  animModel.setAnimation(anim.name,animTime,true);
  Gdx.gl10.glPushMatrix();
  Gdx.gl10.glTranslatef(cam.position.x,cam.position.y,6);
  animModel.render();
  Gdx.gl10.glPopMatrix();
  Gdx.gl.glDisable(GL10.GL_DEPTH_TEST);
  batch.begin();
  font.draw(batch,"fps: " + Gdx.graphics.getFramesPerSecond(),10,20);
  batch.end();
  fps.log();
}
