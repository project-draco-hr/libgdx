{
  final int bpp=this.bytesPerPixel;
  int i;
  for (i=1; i <= bpp; ++i) {
    curLine[i]+=(byte)((prevLine[i] & 0xFF) >>> 1);
  }
  for (int n=curLine.length; i < n; ++i) {
    curLine[i]+=(byte)(((prevLine[i] & 0xFF) + (curLine[i - bpp] & 0xFF)) >>> 1);
  }
}
