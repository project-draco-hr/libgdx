{
  File packFile=new File(outputDir,packFileName);
  if (packFile.exists()) {
    TextureAtlasData textureAtlasData=new TextureAtlasData(new FileHandle(packFile),new FileHandle(packFile),false);
    for (    Page page : pages) {
      for (      Rect rect : page.outputRects) {
        String rectName=Rect.getAtlasName(rect.name,settings.flattenPaths);
        System.out.println(rectName);
        for (        Region region : textureAtlasData.getRegions()) {
          if (region.name.equals(rectName)) {
            throw new GdxRuntimeException("A region with the name \"" + rectName + "\" has already been packed: "+ rect.name);
          }
        }
      }
    }
  }
  FileWriter writer=new FileWriter(packFile,true);
  for (  Page page : pages) {
    writer.write("\n" + page.imageName + "\n");
    writer.write("format: " + settings.format + "\n");
    writer.write("filter: " + settings.filterMin + ","+ settings.filterMag+ "\n");
    writer.write("repeat: " + getRepeatValue() + "\n");
    for (    Rect rect : page.outputRects) {
      writeRect(writer,page,rect,rect.name);
      for (      Alias alias : rect.aliases) {
        rect.index=alias.index;
        writeRect(writer,page,rect,alias.name);
      }
    }
  }
  writer.close();
}
