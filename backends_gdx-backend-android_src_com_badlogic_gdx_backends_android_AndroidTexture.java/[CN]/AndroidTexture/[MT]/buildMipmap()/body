{
  Bitmap obitmap=null;
  if (file != null)   obitmap=loadBitmap(file);
 else   obitmap=this.bitmap;
  Bitmap bitmap=obitmap;
  int level=0;
  int height=bitmap.getHeight();
  int width=bitmap.getWidth();
  if (!MathUtils.isPowerOfTwo(bitmap.getWidth()) || !MathUtils.isPowerOfTwo(bitmap.getHeight()))   throw new GdxRuntimeException("Dimensions have to be a power of two");
  while (height >= 1 || width >= 1 && level < 4) {
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D,level,bitmap,0);
    if (height == 1 || width == 1 || isMipMap == false) {
      break;
    }
    level++;
    if (height > 1)     height/=2;
    if (width > 1)     width/=2;
    Log.d("GDX","Creating texture mipmap: " + width + ", "+ height);
    Bitmap bitmap2=Bitmap.createScaledBitmap(bitmap,width,height,true);
    if (level > 1)     bitmap.recycle();
    bitmap=bitmap2;
  }
  if (file != null)   obitmap.recycle();
}
