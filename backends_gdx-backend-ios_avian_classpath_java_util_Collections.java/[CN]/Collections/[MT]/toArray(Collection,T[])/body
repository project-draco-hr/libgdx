{
  Class c=array.getClass().getComponentType();
  if (array.length < collection.size()) {
    array=(T[])java.lang.reflect.Array.newInstance(c,collection.size());
  }
  int i=0;
  for (  Object o : collection) {
    if (c.isInstance(o)) {
      array[i++]=(T)o;
    }
 else {
      throw new ArrayStoreException();
    }
  }
  return array;
}
