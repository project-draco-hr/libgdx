{
  final Drawable bg=style.background;
  final Drawable hScrollKnob=style.hScrollKnob;
  final Drawable vScrollKnob=style.vScrollKnob;
  float bgLeftWidth=bg == null ? 0 : bg.getLeftWidth();
  float bgRightWidth=bg == null ? 0 : bg.getRightWidth();
  float bgTopHeight=bg == null ? 0 : bg.getTopHeight();
  float bgBottomHeight=bg == null ? 0 : bg.getTopHeight();
  float width=getWidth();
  float height=getHeight();
  areaWidth=width - bgLeftWidth - bgRightWidth;
  areaHeight=height - bgTopHeight - bgBottomHeight;
  if (widget == null)   return;
  float widgetWidth, widgetHeight;
  if (widget instanceof Layout) {
    Layout layout=(Layout)widget;
    widgetWidth=layout.getPrefWidth();
    widgetHeight=layout.getPrefHeight();
  }
 else {
    widgetWidth=widget.getWidth();
    widgetHeight=widget.getHeight();
  }
  scrollX=false;
  scrollY=false;
  if (!disableX && widgetWidth > areaWidth)   scrollX=true;
  if (!disableY && widgetHeight > areaHeight)   scrollY=true;
  if (!disableX && scrollY && widgetWidth > areaWidth - vScrollKnob.getMinWidth()) {
    scrollX=true;
    areaWidth-=vScrollKnob.getMinWidth();
  }
  if (!disableY && scrollX && widgetHeight > areaHeight - hScrollKnob.getMinHeight()) {
    scrollY=true;
    areaHeight-=hScrollKnob.getMinHeight();
  }
  widgetAreaBounds.set(bgLeftWidth,bgBottomHeight + (scrollX ? hScrollKnob.getMinHeight() : 0),areaWidth,areaHeight);
  amountX=MathUtils.clamp(amountX,0,widgetAreaBounds.x);
  amountY=MathUtils.clamp(amountY,0,widgetAreaBounds.y);
  widgetWidth=disableX ? width : Math.max(areaWidth,widgetWidth);
  widgetHeight=disableY ? height : Math.max(areaHeight,widgetHeight);
  if (widget.getWidth() != widgetWidth || widget.getHeight() != widgetHeight) {
    widget.setWidth(widgetWidth);
    widget.setHeight(widgetHeight);
  }
  if (scrollX) {
    hScrollBounds.set(bgLeftWidth,bgBottomHeight,areaWidth,hScrollKnob.getMinHeight());
    hKnobBounds.width=Math.max(hScrollKnob.getMinWidth(),(int)(hScrollBounds.width * areaWidth / widget.getWidth()));
    hKnobBounds.height=hScrollKnob.getMinHeight();
    hKnobBounds.x=hScrollBounds.x + (int)((hScrollBounds.width - hKnobBounds.width) * getScrollPercentX());
    hKnobBounds.y=hScrollBounds.y;
  }
  if (scrollY) {
    vScrollBounds.set(width - bgRightWidth - vScrollKnob.getMinWidth(),height - bgTopHeight - areaHeight,vScrollKnob.getMinWidth(),areaHeight);
    vKnobBounds.width=vScrollKnob.getMinWidth();
    vKnobBounds.height=Math.max(vScrollKnob.getMinHeight(),(int)(vScrollBounds.height * areaHeight / widget.getHeight()));
    vKnobBounds.x=vScrollBounds.x;
    vKnobBounds.y=vScrollBounds.y + (int)((vScrollBounds.height - vKnobBounds.height) * (1 - getScrollPercentY()));
  }
  if (widget instanceof Layout) {
    Layout layout=(Layout)widget;
    layout.invalidate();
    layout.validate();
  }
}
