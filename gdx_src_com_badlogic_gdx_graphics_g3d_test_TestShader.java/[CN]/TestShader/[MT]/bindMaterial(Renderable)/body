{
  if (currentMaterial == renderable.material)   return;
  currentMaterial=renderable.material;
  for (  NewMaterial.Attribute attr : currentMaterial) {
    long t=attr.getType();
    if (BlendingAttribute.is(t))     context.setBlending(true,((BlendingAttribute)attr).sourceFunction,((BlendingAttribute)attr).destFunction);
 else     if (ColorAttribute.is(t)) {
      ColorAttribute col=(ColorAttribute)attr;
      if ((t & ColorAttribute.Diffuse) == ColorAttribute.Diffuse)       program.setUniformf(diffuseColorLoc,col.color);
    }
 else     if (TextureAttribute.is(t)) {
      TextureAttribute tex=(TextureAttribute)attr;
      if ((t & TextureAttribute.Diffuse) == TextureAttribute.Diffuse)       bindTextureAttribute(diffuseTextureLoc,tex);
    }
 else {
      if (!ignoreUnimplemented) {
        throw new GdxRuntimeException("unknown attribute");
      }
    }
  }
}
