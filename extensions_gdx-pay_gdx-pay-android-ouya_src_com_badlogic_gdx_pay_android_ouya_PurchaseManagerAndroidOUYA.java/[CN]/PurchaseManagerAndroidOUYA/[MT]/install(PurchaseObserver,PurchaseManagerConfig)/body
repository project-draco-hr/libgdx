{
  this.observer=observer;
  this.config=config;
  Object[] configuration=(Object[])config.getStoreParam(PurchaseManagerConfig.STORE_NAME_ANDROID_OUYA);
  String developerID=(String)configuration[0];
  applicationKeyPath=(String)configuration[1];
  ouyaFacade=OuyaFacade.getInstance();
  ouyaFacade.init((Context)activity,developerID);
  productIDList=new ArrayList<Purchasable>(config.getOfferCount());
  for (int i=0; i < config.getOfferCount(); i++) {
    productIDList.add(new Purchasable(config.getOffer(i).getIdentifier()));
  }
  try {
    FileHandle fHandle=Gdx.files.internal(applicationKeyPath);
    byte[] applicationKey=fHandle.readBytes();
    X509EncodedKeySpec keySpec=new X509EncodedKeySpec(applicationKey);
    KeyFactory keyFactory=KeyFactory.getInstance("RSA");
    ouyaPublicKey=keyFactory.generatePublic(keySpec);
    showMessage(LOGTYPELOG,"succesfully created publicKey");
    requestProductList();
    observer.handleInstall();
  }
 catch (  Exception e) {
    showMessage(LOGTYPEERROR,"Problem setting up in-app billing: Unable to create encryption key");
    observer.handleInstallError(new RuntimeException("Problem setting up in-app billing: Unable to create encryption key: " + e));
  }
}
