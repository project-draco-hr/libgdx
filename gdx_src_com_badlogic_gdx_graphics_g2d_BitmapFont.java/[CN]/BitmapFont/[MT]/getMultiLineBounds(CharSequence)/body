{
  int start=0;
  float maxWidth=0;
  int numLines=0;
  int length=str.length();
  while (start < length) {
    int lineEnd=indexOf(str,'\n',start);
    float lineWidth=getBounds(str,start,lineEnd).width;
    maxWidth=Math.max(maxWidth,lineWidth);
    start=lineEnd + 1;
    numLines++;
  }
  textBounds.width=maxWidth;
  textBounds.height=data.capHeight - data.descent + (numLines - 1) * data.lineHeight;
  return textBounds;
}
