{
  forceExit=config.forceExit;
  GdxNativesLoader.load();
  final boolean callbacksOnAppKitThread=isMac;
  if (callbacksOnAppKitThread)   java.awt.Toolkit.getDefaultToolkit();
  if (!glfwInit())   throw new GdxRuntimeException("Unable to initialize GLFW.");
  Gdx.app=this;
  Gdx.graphics=graphics=new JglfwGraphics(config);
  Gdx.files=files=new JglfwFiles();
  Gdx.input=input=new JglfwInput(this,callbacksOnAppKitThread);
  Gdx.net=net=new JglfwNet();
  callbacks.add(new GlfwCallbackAdapter(){
    public void windowSize(    long window,    final int width,    final int height){
      Runnable runnable=new Runnable(){
        public void run(){
          Gdx.gl.glViewport(0,0,width,height);
          if (listener != null)           listener.resize(width,height);
          graphics.requestRendering();
        }
      }
;
      if (callbacksOnAppKitThread)       postRunnable(runnable);
 else       runnable.run();
    }
    public void windowPos(    long window,    final int x,    final int y){
      Runnable runnable=new Runnable(){
        public void run(){
          graphics.x=x;
          graphics.y=y;
        }
      }
;
      if (callbacksOnAppKitThread)       postRunnable(runnable);
 else       runnable.run();
    }
    public void windowRefresh(    long window){
      if (!callbacksOnAppKitThread)       renderFrame();
    }
    public void error(    int error,    String description){
      throw new GdxRuntimeException("GLFW error " + error + ": "+ description);
    }
  }
);
  glfwSetCallback(callbacks);
  listener.create();
  listener.resize(graphics.getWidth(),graphics.getHeight());
  if (config.runOnEDT) {
    new Runnable(){
      public void run(){
        loopFrame();
        if (running)         EventQueue.invokeLater(this);
 else         loopEnd();
      }
    }
.run();
  }
 else {
    while (running)     loopFrame();
    loopEnd();
  }
}
