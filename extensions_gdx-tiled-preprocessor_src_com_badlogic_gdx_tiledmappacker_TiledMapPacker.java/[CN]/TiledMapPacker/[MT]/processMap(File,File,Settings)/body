{
  FileHandle inputDirHandle=new FileHandle(inputDir.getAbsolutePath());
  File[] files=inputDir.listFiles(new TmxFilter());
  for (  File file : files) {
    map=TiledLoader.createMap(new FileHandle(file.getAbsolutePath()));
    for (    TileSet set : map.tileSets) {
      if (!processedTileSets.contains(set.imageName)) {
        processedTileSets.add(set.imageName);
        packTileSet(set,inputDirHandle,outputDir,settings);
      }
    }
    writeUpdatedTMX(outputDir,map.tmxFile);
  }
}
