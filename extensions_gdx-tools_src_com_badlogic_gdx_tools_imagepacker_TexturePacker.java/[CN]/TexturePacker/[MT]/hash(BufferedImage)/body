{
  try {
    MessageDigest digest=MessageDigest.getInstance("SHA1");
    WritableRaster raster=image.getRaster();
    final byte[] pixel=new byte[4];
    for (int y=0; y < image.getHeight(); y++) {
      for (int x=0; x < image.getWidth(); x++) {
        raster.getDataElements(x,y,pixel);
        digest.update(pixel);
      }
    }
    return new BigInteger(1,digest.digest()).toString(16);
  }
 catch (  NoSuchAlgorithmException ex) {
    throw new RuntimeException(ex);
  }
}
