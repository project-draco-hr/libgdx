{
  this.settings=settings;
  this.filter=filter;
  File[] files=inputDir.listFiles(filter);
  if (files == null)   return;
  for (  File file : files) {
    if (file.isDirectory())     continue;
    String imageName=file.getAbsolutePath().substring(inputDir.getAbsolutePath().length()) + "\n";
    if (imageName.startsWith("/") || imageName.startsWith("\\"))     imageName=imageName.substring(1);
    int dotIndex=imageName.lastIndexOf('.');
    if (dotIndex != -1)     imageName=imageName.substring(0,dotIndex);
    addImage(ImageIO.read(file),imageName);
  }
  if (images.isEmpty())   return;
  log(inputDir.toString());
  if (filter.format != null)   log("Format: " + filter.format);
 else   log("Format: " + settings.defaultFormat + " (default)");
  if (filter.minFilter != null && filter.magFilter != null)   log("Filter: " + filter.minFilter + ", "+ filter.magFilter);
 else   log("Filter: " + settings.defaultFilterMin + ", "+ settings.defaultFilterMag+ " (default)");
  if (filter.direction != Direction.none)   log("Repeat: " + filter.direction);
  process(outputDir,packFile,inputDir.getName());
}
