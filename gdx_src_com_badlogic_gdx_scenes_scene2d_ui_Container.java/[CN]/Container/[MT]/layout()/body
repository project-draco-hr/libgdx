{
  if (widget == null)   return;
  float containerWidth=getWidth() - padLeft - padRight, containerHeight=getHeight() - padTop - padBottom;
  float minWidth, minHeight, prefWidth, prefHeight, maxWidth, maxHeight;
  Layout layout=widget instanceof Layout ? (Layout)widget : null;
  if (layout != null) {
    minWidth=this.minWidth == null ? layout.getMinWidth() : this.minWidth;
    minHeight=this.minHeight == null ? layout.getMinHeight() : this.minHeight;
    prefWidth=this.prefWidth == null ? layout.getPrefWidth() : this.prefWidth;
    prefHeight=this.prefHeight == null ? layout.getPrefHeight() : this.prefHeight;
    maxWidth=this.maxWidth == null ? layout.getMaxWidth() : this.maxWidth;
    maxHeight=this.maxHeight == null ? layout.getMaxHeight() : this.maxHeight;
  }
 else {
    minWidth=this.minWidth == null ? widget.getWidth() : this.minWidth;
    minHeight=this.minHeight == null ? widget.getHeight() : this.minHeight;
    prefWidth=this.prefWidth == null ? widget.getWidth() : this.prefWidth;
    prefHeight=this.prefHeight == null ? widget.getHeight() : this.prefHeight;
    maxWidth=this.maxWidth == null ? widget.getWidth() : this.maxWidth;
    maxHeight=this.maxHeight == null ? widget.getHeight() : this.maxHeight;
  }
  float width;
  if (fillX > 0)   width=containerWidth * fillX;
 else   width=Math.min(prefWidth,containerWidth);
  if (width < minWidth)   width=minWidth;
  if (maxWidth > 0 && width > maxWidth)   width=maxWidth;
  float height;
  if (fillY > 0)   height=containerHeight * fillY;
 else   height=Math.min(prefHeight,containerHeight);
  if (height < minHeight)   height=minHeight;
  if (maxHeight > 0 && height > maxHeight)   height=maxHeight;
  float x=padLeft;
  if ((align & Align.right) != 0)   x+=containerWidth - width;
 else   if ((align & Align.left) == 0)   x+=(containerWidth - width) / 2;
  float y=padBottom;
  if ((align & Align.top) != 0)   y+=containerHeight - height;
 else   if ((align & Align.bottom) == 0)   y+=(containerHeight - height) / 2;
  if (round) {
    x=Math.round(x);
    y=Math.round(y);
    width=Math.round(width);
    height=Math.round(height);
  }
  widget.setBounds(x,y,width,height);
  if (widget instanceof Layout)   ((Layout)widget).validate();
}
