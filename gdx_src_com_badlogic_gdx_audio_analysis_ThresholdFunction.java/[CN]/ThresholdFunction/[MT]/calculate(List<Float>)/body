{
  ArrayList<Float> thresholds=new ArrayList<Float>(spectralFlux.size());
  for (int i=0; i < spectralFlux.size(); i++) {
    float sum=0;
    int start=Math.max(0,i - historySize / 2);
    int end=Math.min(spectralFlux.size() - 1,i + historySize / 2);
    for (int j=start; j <= end; j++)     sum+=spectralFlux.get(j);
    sum/=(end - start);
    sum*=multiplier;
    thresholds.add(sum);
  }
  return thresholds;
}
