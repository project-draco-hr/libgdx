{
  Vector3 begin=tmp(x1,y1,z1), end=tmp(x2,y2,z2);
  float length=begin.dst(end), coneHeight=length * capLength, coneDiameter=2 * (float)(coneHeight * Math.sqrt(1f / 3)), stemLength=length - coneHeight, stemDiameter=coneDiameter * stemThickness;
  Vector3 up=tmp(end).sub(begin).nor();
  Vector3 forward=tmp(up).crs(Vector3.Z);
  if (forward.isZero())   forward.set(Vector3.X);
  forward.crs(up).nor();
  Vector3 left=tmp(forward).crs(up).nor();
  Vector3 direction=tmp(end).sub(begin).nor();
  Matrix4 userTransform=getVertexTransform(tmp());
  Matrix4 transform=tmp().set(left,up,forward,tmp(direction).scl(stemLength / 2));
  Matrix4 temp=tmp();
  setVertexTransform(temp.set(transform).mul(userTransform));
  cylinder(stemDiameter,stemLength,stemDiameter,divisions);
  transform.setTranslation(tmp(direction).scl(stemLength));
  setVertexTransform(temp.set(transform).mul(userTransform));
  cone(coneDiameter,coneHeight,coneDiameter,divisions);
  setVertexTransform(userTransform);
  cleanup();
}
