{
  StillModel stillModel=new StillModel(new SubMesh[model.meshes.size]);
  ObjectMap<String,Material> materials=new ObjectMap<String,Material>();
  for (int i=0; i < model.materials.size; i++) {
    ModelMaterial jsonMaterial=model.materials.get(i);
    Material material=new Material(jsonMaterial.id);
    material.addAttribute(new ColorAttribute(jsonMaterial.diffuse,"diffuse"));
    if (jsonMaterial.diffuseTextures != null) {
      ModelTexture jsonTexture=jsonMaterial.diffuseTextures.get(0);
      Texture texture=new Texture(Gdx.files.internal(jsonTexture.fileName));
      texture.setFilter(TextureFilter.Linear,TextureFilter.Linear);
      material.addAttribute(new TextureAttribute(texture,0,"diffuseTexture"));
    }
    materials.put(jsonMaterial.id,material);
  }
  for (int i=0; i < model.meshes.size; i++) {
    ModelMesh jsonMesh=model.meshes.get(i);
    ModelMeshPart jsonMeshPart=model.meshes.get(i).parts[0];
    Mesh mesh=new Mesh(false,jsonMesh.vertices.length,jsonMeshPart.indices.length,jsonMesh.attributes);
    mesh.setIndices(jsonMeshPart.indices);
    mesh.setVertices(jsonMesh.vertices);
    StillSubMesh subMesh=new StillSubMesh(jsonMesh.id,mesh,jsonMeshPart.primitiveType);
    subMesh.material=materials.get(model.materials.get(i).id);
    stillModel.subMeshes[i]=subMesh;
  }
  return stillModel;
}
