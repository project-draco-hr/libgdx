{
  long time=System.nanoTime();
  deltaTime=(time - lastFrameTime) / 1000000000.0f;
  lastFrameTime=time;
  mean.addValue(resume ? 0.0f : deltaTime);
  boolean lrunning=false;
  boolean lpause=false;
  boolean ldestroy=false;
  boolean lresume=false;
synchronized (synch) {
    lrunning=running;
    lpause=pause;
    ldestroy=destroy;
    lresume=resume;
    if (resume) {
      resume=false;
      resuming=true;
    }
    if (pause) {
      pause=false;
      pausing=true;
    }
    if (destroy) {
      destroy=false;
      destroying=true;
    }
  }
  if (lresume) {
    ((AndroidAudio)app.getAudio()).resume();
    app.listener.resume();
    Gdx.app.log("AndroidGraphics","resumed");
  }
  if (lrunning && (Gdx.graphics.getGL10() != null || Gdx.graphics.getGL11() != null || Gdx.graphics.getGL20() != null)) {
synchronized (app.runnables) {
      app.executedRunnables.clear();
      app.executedRunnables.addAll(app.runnables);
      app.runnables.clear();
      for (int i=0; i < app.executedRunnables.size; i++) {
        try {
          app.executedRunnables.get(i).run();
        }
 catch (        Throwable t) {
          t.printStackTrace();
        }
      }
    }
    app.input.processEvents();
    app.listener.render();
  }
  if (lpause) {
    app.listener.pause();
    ((AndroidAudio)app.getAudio()).pause();
    Gdx.app.log("AndroidGraphics","paused");
  }
  if (ldestroy) {
    app.listener.dispose();
    ((AndroidAudio)app.getAudio()).dispose();
    Gdx.app.log("AndroidGraphics","destroyed");
  }
  if (time - frameStart > 1000000000) {
    fps=frames;
    frames=0;
    frameStart=time;
  }
  frames++;
synchronized (synch) {
    if (resuming) {
      resuming=false;
      synch.notifyAll();
    }
    if (pausing) {
      pausing=false;
      synch.notifyAll();
    }
    if (destroying) {
      destroying=false;
      synch.notifyAll();
    }
  }
}
