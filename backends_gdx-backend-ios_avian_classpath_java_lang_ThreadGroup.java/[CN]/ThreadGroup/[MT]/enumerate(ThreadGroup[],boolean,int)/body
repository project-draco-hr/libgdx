{
  for (Cell<ThreadGroup> c=subgroups; c != null && count < groups.length; c=c.next) {
    ThreadGroup g=c.value;
    groups[count++]=g;
    if (recurse) {
      count=g.enumerate(groups,true,count);
    }
  }
  return count;
}
