{
  updateVertexArray();
  gl.glBindBuffer(GL.GL_ARRAY_BUFFER,vertexHandle);
  gl.glBufferData(GL.GL_ARRAY_BUFFER,vertices.length * 4,verticesBuffer,GL.GL_DYNAMIC_DRAW);
  if (colors != null) {
    gl.glBindBuffer(GL.GL_ARRAY_BUFFER,colorHandle);
    gl.glBufferData(GL.GL_ARRAY_BUFFER,colors.length * 4,colorsBuffer,GL.GL_DYNAMIC_DRAW);
  }
  if (normals != null) {
    gl.glBindBuffer(GL.GL_ARRAY_BUFFER,normalHandle);
    gl.glBufferData(GL.GL_ARRAY_BUFFER,normals.length * 4,normalsBuffer,GL.GL_DYNAMIC_DRAW);
  }
  if (uv != null) {
    gl.glBindBuffer(GL.GL_ARRAY_BUFFER,uvHandle);
    gl.glBufferData(GL.GL_ARRAY_BUFFER,uv.length * 4,uvBuffer,GL.GL_DYNAMIC_DRAW);
  }
  if (indices != null) {
    gl.glBindBuffer(GL.GL_ELEMENT_ARRAY_BUFFER,indexHandle);
    gl.glBufferData(GL.GL_ELEMENT_ARRAY_BUFFER,indices.length * 4,indicesBuffer,GL.GL_DYNAMIC_DRAW);
    gl.glBindBuffer(GL.GL_ELEMENT_ARRAY_BUFFER,0);
  }
  gl.glBindBuffer(GL.GL_ARRAY_BUFFER,0);
  dirty=false;
  numVertices=currentVertex;
  numIndices=currentIndex;
  currentVertex=0;
  currentIndex=0;
}
