{
  if (Keyboard.isCreated()) {
    while (Keyboard.next()) {
      if (Keyboard.getEventKeyState()) {
        int keyCode=getGdxKeyCode(Keyboard.getEventKey());
        char keyChar=Keyboard.getEventCharacter();
        KeyEvent event=usedKeyEvents.obtain();
        event.keyCode=0;
        event.keyChar=keyChar;
        event.type=KeyEvent.KEY_TYPED;
        keyEvents.add(event);
        if (lastKeyPressed != keyCode || pressedKeys == 0) {
          lastKeyPressed=keyCode;
          pressedKeys++;
          event=usedKeyEvents.obtain();
          event.keyCode=keyCode;
          event.keyChar=0;
          event.type=KeyEvent.KEY_DOWN;
          keyEvents.add(event);
        }
      }
 else {
        int keyCode=LwjglInput.getGdxKeyCode(Keyboard.getEventKey());
        KeyEvent event=usedKeyEvents.obtain();
        event.keyCode=keyCode;
        event.keyChar=0;
        event.type=KeyEvent.KEY_UP;
        keyEvents.add(event);
        pressedKeys--;
      }
    }
  }
}
