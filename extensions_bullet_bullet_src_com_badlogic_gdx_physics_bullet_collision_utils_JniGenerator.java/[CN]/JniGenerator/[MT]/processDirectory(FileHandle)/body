{
  FileHandle[] files=dir.list();
  for (  FileHandle file : files) {
    if (file.isDirectory() && !file.path().contains(".svn")) {
      processDirectory(file);
    }
 else {
      if (file.extension().equals("java") && !file.name().contains("JniGenerator")) {
        String javaContent=file.readString();
        if (javaContent.contains(JAVA_METHOD_MARKER)) {
          generateHFile(file);
          String className=getFullyQualifiedClassName(file);
          FileHandle hFile=new FileHandle(jniDir.path() + "/" + className+ ".h");
          FileHandle cppFile=new FileHandle(jniDir + "/" + className+ ".cpp");
          generateCppFile(javaContent,hFile,cppFile);
        }
      }
    }
  }
}
