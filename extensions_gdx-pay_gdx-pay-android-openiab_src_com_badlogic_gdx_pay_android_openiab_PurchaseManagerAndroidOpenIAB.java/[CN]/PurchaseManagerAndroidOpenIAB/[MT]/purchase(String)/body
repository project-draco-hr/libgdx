{
  String payload=null;
  helper.launchPurchaseFlow(activity,identifier,IabHelper.ITEM_TYPE_INAPP,requestCode,new IabHelper.OnIabPurchaseFinishedListener(){
    @Override public void onIabPurchaseFinished(    IabResult result,    Purchase purchase){
      if (result.isFailure()) {
        observer.handlePurchaseError(new RuntimeException(result.toString()));
      }
 else {
        Transaction transaction=transaction(purchase);
        observer.handlePurchase(transaction);
        Offer offer=config.getOffer(purchase.getSku());
        if (offer == null) {
          Log.d(TAG,"Offer not found for: " + purchase.getSku());
        }
 else         if (offer.getType() == OfferType.CONSUMABLE) {
          helper.consumeAsync(purchase,new IabHelper.OnConsumeFinishedListener(){
            @Override public void onConsumeFinished(            Purchase purchase,            IabResult result){
              if (!result.isSuccess()) {
                Log.e(TAG,"Error while consuming: " + result);
              }
            }
          }
);
        }
      }
    }
  }
,payload);
}
