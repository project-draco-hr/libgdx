{
  this.observer=observer;
  this.config=config;
  for (int i=0; i < config.getOfferCount(); i++) {
    Offer offer=config.getOffer(i);
    String identifier=offer.getIdentifier();
    Map<String,String> identifierForStores=offer.getIdentifierForStores();
    for (    Map.Entry<String,String> entry : identifierForStores.entrySet()) {
      String storeNameOpenIAB=storeNameToOpenIAB(entry.getKey());
      String identifierForStore=entry.getValue();
      if (!(SkuManager.getInstance().getStoreSku(storeNameOpenIAB,identifier).equals(identifierForStore))) {
        SkuManager.getInstance().mapSku(identifier,storeNameOpenIAB,identifierForStore);
      }
    }
  }
  OpenIabHelper.Options.Builder builder=new OpenIabHelper.Options.Builder().setVerifyMode(OpenIabHelper.Options.VERIFY_SKIP).addStoreKeys(config.getStoreKeys());
  helper=new OpenIabHelper(activity,builder.build());
  helper.startSetup(new IabHelper.OnIabSetupFinishedListener(){
    public void onIabSetupFinished(    IabResult result){
      if (!result.isSuccess()) {
        helper=null;
        inventory=null;
        PurchaseManagerAndroidOpenIAB.this.observer=null;
        PurchaseManagerAndroidOpenIAB.this.config=null;
        observer.handleInstallError(new GdxRuntimeException("Problem setting up in-app billing: " + result));
      }
 else {
        boolean querySkuDetails=true;
        helper.queryInventoryAsync(querySkuDetails,new IabHelper.QueryInventoryFinishedListener(){
          @Override public void onQueryInventoryFinished(          IabResult result,          Inventory inventory){
            PurchaseManagerAndroidOpenIAB.this.inventory=inventory;
            observer.handleInstall();
          }
        }
);
      }
    }
  }
);
}
