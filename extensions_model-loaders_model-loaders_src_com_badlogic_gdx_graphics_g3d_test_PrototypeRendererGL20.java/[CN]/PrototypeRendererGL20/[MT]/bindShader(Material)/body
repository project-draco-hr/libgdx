{
  ShaderProgram shader=material.getShader();
  if (shader == currentShader)   return false;
  currentShader=shader;
  currentShader.begin();
  lightManager.applyGlobalLights(currentShader);
  lightManager.applyLights(currentShader);
  currentShader.setUniformMatrix("u_projectionViewMatrix",cam.combined);
  currentShader.setUniformf("camPos",cam.position.x,cam.position.y,cam.position.z,1.2f / cam.far);
  currentShader.setUniformf("camDir",cam.direction.x,cam.direction.y,cam.direction.z);
  return true;
}
