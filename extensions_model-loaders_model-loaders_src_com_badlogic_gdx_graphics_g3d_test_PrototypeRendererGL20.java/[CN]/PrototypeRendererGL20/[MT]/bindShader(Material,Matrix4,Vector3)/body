{
  if (material.shader == null)   material.shader=materialShaderHandler.getShader(material);
  if (material.shader == currentShader)   return;
  currentShader=material.shader;
  currentShader.begin();
  lightManager.applyGlobalLights(currentShader);
  lightManager.calculateAndApplyLightsToModel(center,currentShader);
  currentShader.setUniformMatrix("u_projectionViewMatrix",cam.combined);
  currentShader.setUniformf("camPos",cam.position.x,cam.position.y,cam.position.z);
  currentShader.setUniformMatrix("u_normalMatrix",normalMatrix.set(matrix),false);
  currentShader.setUniformMatrix("u_modelMatrix",matrix,false);
}
