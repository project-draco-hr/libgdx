{
  this.model=model;
  System.arraycopy(instance.getTransform().val,0,transform.val,0,16);
  sortCenter.set(instance.getSortCenter());
  boundingSphereRadius=instance.getBoundingSphereRadius();
  if (instance.getMaterials() != null) {
    for (    Material material : instance.getMaterials()) {
      if (material.getShader() == null)       material.generateShader(materialShaderHandler);
      final Material copy=materialPool.obtain();
      copy.setPooled(material);
      materials.add(copy);
    }
  }
 else {
    for (    SubMesh subMesh : model.getSubMeshes()) {
      final Material material=subMesh.material;
      if (material.getShader() == null)       material.generateShader(materialShaderHandler);
      final Material copy=materialPool.obtain();
      copy.setPooled(material);
      materials.add(copy);
    }
  }
}
