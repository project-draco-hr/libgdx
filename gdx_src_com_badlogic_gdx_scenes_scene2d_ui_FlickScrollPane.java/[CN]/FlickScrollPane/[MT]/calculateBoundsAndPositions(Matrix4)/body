{
  float widgetWidth, widgetHeight;
  if (widget instanceof Layout) {
    Layout layout=(Layout)widget;
    widgetWidth=layout.getPrefWidth();
    widgetHeight=layout.getPrefHeight();
  }
 else {
    widgetWidth=widget.width;
    widgetHeight=widget.height;
  }
  scrollX=!disableX && (widgetWidth > width || forceOverscrollX);
  scrollY=!disableY && (widgetHeight > height || forceOverscrollY);
  widgetWidth=disableX ? width : Math.max(width,widgetWidth);
  widgetHeight=disableY ? height : Math.max(height,widgetHeight);
  if (widget.width != widgetWidth || widget.height != widgetHeight) {
    widget.width=widgetWidth;
    widget.height=widgetHeight;
    if (widget instanceof Layout)     ((Layout)widget).invalidate();
  }
  maxX=widget.width - width;
  maxY=widget.height - height;
  widget.y=(int)(scrollY ? amountY : maxY) - widget.height + height;
  widget.x=-(int)(scrollX ? amountX : 0);
  widgetAreaBounds.set(0,0,width,height);
  ScissorStack.calculateScissors(stage.getCamera(),batchTransform,widgetAreaBounds,scissorBounds);
  if (widget instanceof Cullable) {
    widgetCullingArea.x=-widget.x;
    widgetCullingArea.y=-widget.y;
    widgetCullingArea.width=width;
    widgetCullingArea.height=height;
    ((Cullable)widget).setCullingArea(widgetCullingArea);
  }
}
