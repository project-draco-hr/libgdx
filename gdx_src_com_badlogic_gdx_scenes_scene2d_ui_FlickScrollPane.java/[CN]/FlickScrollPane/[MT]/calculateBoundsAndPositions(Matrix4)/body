{
  float widgetWidth, widgetHeight;
  if (widget instanceof Layout) {
    Layout layout=(Layout)widget;
    widgetWidth=layout.getPrefWidth();
    widgetHeight=layout.getPrefHeight();
  }
 else {
    widgetWidth=widget.width;
    widgetHeight=widget.height;
  }
  scrollX=widgetWidth > width || forceScrollX;
  scrollY=widgetHeight > height || forceScrollY;
  widgetWidth=Math.max(width,widgetWidth);
  widgetHeight=Math.max(height,widgetHeight);
  if (widget.width != widgetWidth || widget.height != widgetHeight) {
    widget.width=widgetWidth;
    widget.height=widgetHeight;
    if (widget instanceof Layout) {
      Layout layout=(Layout)widget;
      layout.invalidate();
      layout.layout();
    }
  }
  widgetAreaBounds.set(0,0,width,height);
  maxX=widget.width - width;
  maxY=widget.height - height;
  float widgetY=widgetAreaBounds.y;
  if (scrollY)   widgetY-=(int)amountY;
 else   widgetY-=(int)maxY;
  widget.y=widgetY;
  float widgetX=widgetAreaBounds.x;
  if (scrollX)   widgetX-=(int)amountX;
  widget.x=widgetX;
  ScissorStack.calculateScissors(stage.getCamera(),batchTransform,widgetAreaBounds,scissorBounds);
}
