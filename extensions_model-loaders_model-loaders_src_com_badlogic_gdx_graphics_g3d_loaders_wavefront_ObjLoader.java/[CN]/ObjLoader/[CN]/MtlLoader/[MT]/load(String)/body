{
  String line;
  String[] tokens;
  String curMatName="default";
  String textureName="";
  Color difcolor=Color.WHITE;
  Color speccolor=Color.WHITE;
  FileHandle file=Gdx.files.internal(name);
  if (file == null || file.exists() == false)   return;
  BufferedReader reader=new BufferedReader(new InputStreamReader(file.read()),4096);
  try {
    while ((line=reader.readLine()) != null) {
      if (line.length() > 0 && line.charAt(0) == '\t')       line=line.substring(1);
      tokens=line.split("\\s+");
      if (tokens[0].length() == 0) {
        continue;
      }
 else       if (tokens[0].charAt(0) == '#')       continue;
 else       if (tokens[0].toLowerCase().equals("newmtl")) {
        Material mat;
        Texture texture;
        if (textureName.length() > 0)         texture=new Texture(textureDir.child(textureName));
 else         texture=new Texture(1,1,Format.RGB888);
        mat=new Material(curMatName,new TextureAttribute(texture,0,"s_tex"),new ColorAttribute(difcolor,ColorAttribute.diffuse),new ColorAttribute(speccolor,ColorAttribute.specular));
        materials.add(mat);
        curMatName=tokens[1];
        curMatName=curMatName.replace('.','_');
        difcolor=Color.WHITE;
        speccolor=Color.WHITE;
        textureName="";
      }
 else       if (tokens[0].toLowerCase().equals("kd") || tokens[0].toLowerCase().equals("ks")) {
        float r=Float.parseFloat(tokens[1]);
        float g=Float.parseFloat(tokens[2]);
        float b=Float.parseFloat(tokens[3]);
        float a=1;
        if (tokens.length > 4)         a=Float.parseFloat(tokens[4]);
        if (tokens[0].toLowerCase().equals("kd")) {
          difcolor=new Color();
          difcolor.set(r,g,b,a);
        }
 else {
          speccolor=new Color();
          speccolor.set(r,g,b,a);
        }
      }
 else       if (tokens[0].toLowerCase().equals("map_kd")) {
        textureName=tokens[1];
      }
    }
    reader.close();
  }
 catch (  IOException e) {
    return;
  }
  Material mat;
  Texture texture;
  if (textureName.length() > 0)   texture=new Texture(textureDir.child(textureName));
 else   texture=new Texture(1,1,Format.RGB888);
  mat=new Material(curMatName,new TextureAttribute(texture,0,"s_tex"),new ColorAttribute(difcolor,ColorAttribute.diffuse),new ColorAttribute(speccolor,ColorAttribute.specular));
  materials.add(mat);
  return;
}
