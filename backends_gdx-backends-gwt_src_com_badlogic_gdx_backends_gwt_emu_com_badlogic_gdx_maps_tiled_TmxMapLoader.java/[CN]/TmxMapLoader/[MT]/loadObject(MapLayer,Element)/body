{
  if (element.getName().equals("object")) {
    MapObject object=null;
    int x=element.getIntAttribute("x",0);
    int y=element.getIntAttribute("y",0);
    int width=element.getIntAttribute("width",0);
    int height=element.getIntAttribute("height",0);
    if (element.getChildCount() > 0) {
      Element child=element.getChildByName("polygon");
      if (child != null) {
        String[] points=child.getAttribute("points").split(" ");
        float[] vertices=new float[points.length * 2];
        for (int i=0; i < points.length; i++) {
          String[] point=points[i].split(",");
          vertices[i * 2]=x + Integer.parseInt(point[0]);
          vertices[i * 2 + 1]=y + Integer.parseInt(point[1]);
        }
        object=new PolygonMapObject(vertices);
      }
 else {
        child=element.getChildByName("polyline");
        if (child != null) {
          String[] points=child.getAttribute("points").split(" ");
          float[] vertices=new float[points.length * 2];
          for (int i=0; i < points.length; i++) {
            String[] point=points[i].split(",");
            vertices[i * 2]=x + Integer.parseInt(point[0]);
            vertices[i * 2 + 1]=y + Integer.parseInt(point[1]);
          }
          object=new PolylineMapObject(vertices);
        }
      }
    }
    if (object == null) {
      object=new RectangleMapObject(x,y,width,height);
    }
    object.setName(element.getAttribute("name",null));
    String type=element.getAttribute("type",null);
    if (type != null) {
      object.getProperties().put("type",type);
    }
    Element properties=element.getChildByName("properties");
    if (properties != null) {
      loadProperties(object.getProperties(),properties);
    }
    layer.getObjects().addObject(object);
  }
}
