{
  String beanResourceName=getBeanResourceName(beanName);
  InputStream is=(cls == null) ? ClassLoader.getSystemResourceAsStream(beanResourceName) : cls.getResourceAsStream(beanResourceName);
  IOException serializationException=null;
  Object result=null;
  if (is != null) {
    try {
      ObjectInputStream ois=(cls == null) ? new ObjectInputStream(is) : new CustomizedObjectInputStream(is,cls);
      result=ois.readObject();
    }
 catch (    IOException e) {
      serializationException=e;
    }
  }
  boolean deserialized=true;
  ClassLoader classLoader=cls == null ? ClassLoader.getSystemClassLoader() : cls;
  if (result == null) {
    deserialized=false;
    try {
      result=Class.forName(beanName,true,classLoader).newInstance();
    }
 catch (    Exception e) {
      if (serializationException != null) {
        throw serializationException;
      }
      throw new ClassNotFoundException(e.getClass() + ": " + e.getMessage());
    }
  }
  if (result != null) {
    boolean isApplet=false;
    try {
      isApplet=result instanceof Applet;
    }
 catch (    Throwable t) {
    }
    if (isApplet) {
      appletLoaded((Applet)result,classLoader,beanName,context,(AppletInitializer)initializer,deserialized);
    }
    if (null != context) {
      context.add(result);
    }
  }
  return result;
}
