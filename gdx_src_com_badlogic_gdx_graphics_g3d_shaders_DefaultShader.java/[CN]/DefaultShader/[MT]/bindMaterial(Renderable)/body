{
  if (currentMaterial == renderable.material)   return;
  int cullFace=defaultCullFace;
  currentMaterial=renderable.material;
  for (  final Material.Attribute attr : currentMaterial) {
    final long t=attr.type;
    if (BlendingAttribute.is(t)) {
      context.setBlending(true,((BlendingAttribute)attr).sourceFunction,((BlendingAttribute)attr).destFunction);
      set(u_opacity,((BlendingAttribute)attr).opacity);
    }
 else     if (ColorAttribute.is(t)) {
      ColorAttribute col=(ColorAttribute)attr;
      if ((t & ColorAttribute.Diffuse) == ColorAttribute.Diffuse)       set(u_diffuseColor,col.color);
 else       if ((t & ColorAttribute.Specular) == ColorAttribute.Specular)       set(u_specularColor,col.color);
    }
 else     if (TextureAttribute.is(t)) {
      final TextureAttribute tex=(TextureAttribute)attr;
      if ((t & TextureAttribute.Diffuse) == TextureAttribute.Diffuse && hasUniform(u_diffuseTexture))       bindTextureAttribute(loc(u_diffuseTexture),tex);
      if ((t & TextureAttribute.Normal) == TextureAttribute.Normal && hasUniform(u_normalTexture))       bindTextureAttribute(loc(u_normalTexture),tex);
    }
 else     if ((t & FloatAttribute.Shininess) == FloatAttribute.Shininess)     set(u_shininess,((FloatAttribute)attr).value);
 else     if ((t & IntAttribute.CullFace) == IntAttribute.CullFace)     cullFace=((IntAttribute)attr).value;
 else     if ((t & FloatAttribute.AlphaTest) == FloatAttribute.AlphaTest)     set(u_alphaTest,((FloatAttribute)attr).value);
 else     if (!ignoreUnimplemented)     throw new GdxRuntimeException("Unknown material attribute: " + attr.toString());
  }
  context.setCullFace(cullFace);
}
