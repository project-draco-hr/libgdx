{
  StringBuilder builder=new StringBuilder();
  Expression getterExp=new Expression(oldInstance,builder.append("get").append(property).toString(),null);
  try {
    Object oldVal=getterExp.getValue();
    enc.writeExpression(getterExp);
    Object targetVal=enc.get(oldVal);
    builder.delete(0,builder.capacity());
    Object newVal=new Expression(newInstance,builder.append("get").append(property).toString(),null).getValue();
    if (null == targetVal) {
      if (null != newVal) {
        builder.delete(0,builder.capacity());
        Statement setterStm=new Statement(oldInstance,builder.append("set").append(property).toString(),new Object[]{null});
        enc.writeStatement(setterStm);
      }
    }
 else {
      PersistenceDelegate pd=enc.getPersistenceDelegate(targetVal.getClass());
      if (!pd.mutatesTo(targetVal,newVal)) {
        builder.delete(0,builder.capacity());
        Statement setterStm=new Statement(oldInstance,builder.append("set").append(property).toString(),new Object[]{oldVal});
        enc.writeStatement(setterStm);
      }
    }
  }
 catch (  Exception ex) {
    enc.getExceptionListener().exceptionThrown(ex);
  }
}
