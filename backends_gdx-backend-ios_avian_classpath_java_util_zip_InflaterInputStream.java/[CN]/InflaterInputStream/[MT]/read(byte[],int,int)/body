{
  if (inflater.finished()) {
    return -1;
  }
  while (true) {
    if (inflater.needsInput()) {
      int count=in.read(buffer);
      if (count > 0) {
        inflater.setInput(buffer,0,count);
      }
 else {
        throw new EOFException();
      }
    }
    try {
      int count=inflater.inflate(b,offset,length);
      if (count > 0) {
        return count;
      }
 else       if (inflater.needsDictionary()) {
        throw new IOException("missing dictionary");
      }
 else       if (inflater.finished()) {
        return -1;
      }
    }
 catch (    DataFormatException e) {
      throw new IOException(e);
    }
  }
}
