{
  GL10 gl=Gdx.graphics.getGL10();
  gl.glViewport(0,0,Gdx.graphics.getWidth(),Gdx.graphics.getHeight());
  gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
  camera.update();
  gl.glMatrixMode(GL10.GL_PROJECTION);
  gl.glLoadMatrixf(camera.getCombinedMatrix().val,0);
  gl.glMatrixMode(GL10.GL_MODELVIEW);
  updateWater();
  updateVertices();
  float[][] tmp=curr;
  curr=last;
  last=tmp;
  gl.glEnable(GL10.GL_TEXTURE_2D);
  texture.bind();
  mesh.render(GL10.GL_TRIANGLES);
  if (Gdx.input.isTouched()) {
    Ray ray=camera.getPickRay(Gdx.input.getX(),(int)(Gdx.input.getY() / (float)Gdx.graphics.getHeight() * Gdx.graphics.getWidth()));
    Intersector.intersectRayPlane(ray,plane,point);
    curr[(int)point.x][(int)point.y]=2;
  }
}
