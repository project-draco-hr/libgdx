{
  String className;
  ApplicationType type=Gdx.app.getType();
  if (type == ApplicationType.Android) {
    if (Gdx.app.getVersion() >= 16) {
      className="com.badlogic.gdx.controllers.android.AndroidControllers";
    }
 else {
      Gdx.app.log("Controllers","No controller manager is available for Android versions < API level 16");
      manager=new ControllerManagerStub();
      return;
    }
  }
 else   if (type == ApplicationType.Desktop) {
    className="com.badlogic.gdx.controllers.desktop.DesktopControllerManager";
  }
 else {
    Gdx.app.log("Controllers","No controller manager is available for: " + Gdx.app.getType());
    manager=new ControllerManagerStub();
    return;
  }
  try {
    manager=(ControllerManager)Class.forName(className).newInstance();
  }
 catch (  Throwable ex) {
    throw new GdxRuntimeException("Error creating controller manager: " + className,ex);
  }
}
