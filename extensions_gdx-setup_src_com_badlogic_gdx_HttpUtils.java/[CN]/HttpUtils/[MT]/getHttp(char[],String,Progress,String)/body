{
  HttpURLConnection conn=null;
  String data=encodeParameters(parameters);
  if (data == null)   return 0;
  try {
    System.out.println("fetching: " + url + "?"+ data);
    long start=System.nanoTime();
    URL commandURL=new URL(url + "?" + data);
    conn=(HttpURLConnection)commandURL.openConnection();
    conn.setDoInput(true);
    conn.setDoOutput(false);
    conn.setUseCaches(true);
    conn.setRequestProperty("user-agent","Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11");
    conn.setRequestProperty("Accept-Charset","utf-8");
    conn.setRequestMethod("GET");
    if (progress != null)     progress.setProgress(0.1f);
    conn.connect();
    System.out.println("connecting took: " + (System.nanoTime() - start) / 1000000000.0f);
    InputStream bis=conn.getInputStream();
    InputStreamReader isr=new InputStreamReader(bis,"UTF-8");
    int total=conn.getContentLength();
    int readChars=0;
    while (true) {
      int length=isr.read(out,readChars,out.length - readChars);
      if (length == -1)       break;
      if (length == 0)       throw new RuntimeException("Buffer to small for downloading content");
      readChars+=length;
      if (progress != null)       progress.setProgress(readChars / (total / 2f));
    }
    if (progress != null)     progress.setProgress(1);
    if (isr != null)     isr.close();
    System.out.println("fetching took: " + (System.nanoTime() - start) / 1000000000.0f);
    return readChars;
  }
 catch (  Exception e) {
    e.printStackTrace();
    if (progress != null)     progress.setProgress(0);
    return 0;
  }
}
