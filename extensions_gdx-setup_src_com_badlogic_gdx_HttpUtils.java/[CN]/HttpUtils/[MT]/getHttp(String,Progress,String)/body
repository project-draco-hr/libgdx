{
  HttpURLConnection conn=null;
  String data=encodeParameters(parameters);
  if (data == null)   return null;
  try {
    System.out.println("fetching: " + url + (data.length() > 0 ? "?" + data : ""));
    long start=System.nanoTime();
    URL commandURL=new URL(url + (data.length() > 0 ? "?" + data : ""));
    conn=(HttpURLConnection)commandURL.openConnection();
    conn.setDoInput(true);
    conn.setDoOutput(false);
    conn.setUseCaches(true);
    conn.setRequestProperty("user-agent","Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11");
    conn.setRequestProperty("Accept-Charset","utf-8");
    conn.setRequestMethod("GET");
    if (progress != null)     progress.setProgress(0.01f);
    conn.connect();
    int total=conn.getContentLength();
    System.out.println("connecting took: " + (System.nanoTime() - start) / 1000000000.0f);
    BufferedInputStream bis=new BufferedInputStream(conn.getInputStream(),1024);
    InputStreamReader isr=new InputStreamReader(bis,"UTF-8");
    StringBuilder output=new StringBuilder(1024 * 100);
    char[] buffer=new char[1024];
    while (true) {
      int length=isr.read(buffer);
      if (length == -1)       break;
      if (length == 0)       throw new RuntimeException("Buffer to small for downloading content");
      output.append(buffer,0,length);
      if (progress != null)       progress.setProgress(output.length() / (total / 2f));
      if (Thread.currentThread().isInterrupted())       throw new InterruptedException(url);
    }
    if (progress != null)     progress.setProgress(1);
    if (isr != null)     isr.close();
    System.out.println("fetching took: " + (System.nanoTime() - start) / 1000000000.0f);
    return output.toString();
  }
 catch (  Exception e) {
    e.printStackTrace();
    if (progress != null)     progress.setProgress(0);
    return null;
  }
}
