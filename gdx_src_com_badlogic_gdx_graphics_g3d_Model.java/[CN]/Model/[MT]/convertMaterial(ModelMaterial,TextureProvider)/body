{
  Material result=new Material();
  result.id=mtl.id;
  if (mtl.ambient != null)   result.set(new ColorAttribute(ColorAttribute.Ambient,mtl.ambient));
  if (mtl.diffuse != null)   result.set(new ColorAttribute(ColorAttribute.Diffuse,mtl.diffuse));
  if (mtl.specular != null)   result.set(new ColorAttribute(ColorAttribute.Specular,mtl.specular));
  if (mtl.emissive != null)   result.set(new ColorAttribute(ColorAttribute.Emissive,mtl.emissive));
  if (mtl.shininess > 0f)   result.set(new FloatAttribute(FloatAttribute.Shininess,mtl.shininess));
  ObjectMap<String,Texture> textures=new ObjectMap<String,Texture>();
  if (mtl.diffuseTextures != null) {
    for (    ModelTexture tex : mtl.diffuseTextures) {
      if (textures.containsKey(tex.fileName))       continue;
      Texture texture=textureProvider.load(tex.fileName);
      textures.put(tex.fileName,texture);
      disposables.add(texture);
    }
    for (    ModelTexture tex : mtl.diffuseTextures) {
      TextureDescriptor descriptor=new TextureDescriptor();
      descriptor.texture=textures.get(tex.fileName);
      descriptor.minFilter=GL20.GL_LINEAR;
      descriptor.magFilter=GL20.GL_LINEAR;
      descriptor.uWrap=GL20.GL_CLAMP_TO_EDGE;
      descriptor.vWrap=GL20.GL_CLAMP_TO_EDGE;
      result.set(new TextureAttribute(TextureAttribute.Diffuse,descriptor));
    }
  }
  return result;
}
