{
  if (ignoreDirs.contains(inputDir.inputFile))   return;
  Settings settings=null;
  File parent=inputDir.inputFile;
  while (true) {
    settings=dirToSettings.get(parent);
    if (settings != null)     break;
    if (parent.equals(root))     break;
    parent=parent.getParentFile();
  }
  if (settings == null)   settings=defaultSettings;
  if (settings.combineSubdirectories) {
    files=new FileProcessor(this){
      protected void processDir(      Entry entryDir,      ArrayList<Entry> files){
        ignoreDirs.add(entryDir.inputFile);
      }
      protected void processFile(      Entry entry){
        addProcessedFile(entry);
      }
    }
.process(inputDir.inputFile,null);
  }
  if (files.isEmpty())   return;
  System.out.println(inputDir.inputFile.getName());
  TexturePacker2 packer=new TexturePacker2(root,settings);
  for (  Entry file : files)   packer.addImage(file.inputFile);
  packer.pack(inputDir.outputDir,packFileName);
}
