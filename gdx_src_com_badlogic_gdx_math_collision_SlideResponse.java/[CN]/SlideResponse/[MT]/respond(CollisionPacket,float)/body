{
  destination.set(packet.position).add(packet.velocity);
  newPosition.set(packet.position);
  if (packet.getNearestDistance() >= displacementDistance) {
    newVelocity.set(packet.velocity).nor().mul(packet.getNearestDistance() - displacementDistance);
    newPosition.add(newVelocity);
    newVelocity.nor();
    packet.getIntersectionPoint().sub(newVelocity.mul(displacementDistance));
  }
  slidingPlaneOrigin.set(packet.getIntersectionPoint());
  slidingPlaneNormal.set(packet.position).sub(packet.getIntersectionPoint()).nor();
  slidingPlane.set(slidingPlaneOrigin,slidingPlaneNormal);
  newDestination.set(destination).sub(slidingPlane.normal.mul(slidingPlane.distance(destination)));
  newVelocity.set(newDestination).sub(packet.getIntersectionPoint());
  packet.velocity.set(newVelocity);
  packet.position.set(newPosition);
}
