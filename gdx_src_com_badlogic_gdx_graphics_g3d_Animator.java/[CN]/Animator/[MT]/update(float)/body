{
  if (mCurrentAnim != null) {
    if (mWrapMode != WrapMode.SingleFrame) {
      mAnimPos+=dt;
      if (mAnimPos > mAnimLen) {
        if (mWrapMode == WrapMode.Loop) {
          mAnimPos=0.f;
        }
 else         if (mWrapMode == WrapMode.Clamp) {
          mAnimPos=mAnimLen;
        }
      }
    }
    float animPos=mAnimPos / mAnimLen;
    int numFrames=mCurrentAnim.getNumFrames();
    int currentFrameIdx=Math.min(numFrames - 1,(int)(animPos * (float)numFrames));
    if (currentFrameIdx != mCurrentFrameIdx) {
      if (currentFrameIdx < numFrames - 1) {
        mNextFrameIdx=currentFrameIdx + 1;
      }
 else {
switch (mWrapMode) {
case Loop:
case SingleFrame:
          mNextFrameIdx=0;
        break;
case Clamp:
      mNextFrameIdx=currentFrameIdx;
    break;
}
}
mFrameDelta=0.f;
mCurrentFrameIdx=currentFrameIdx;
}
mFrameDelta+=dt;
setInterpolationFrames();
interpolate();
}
}
