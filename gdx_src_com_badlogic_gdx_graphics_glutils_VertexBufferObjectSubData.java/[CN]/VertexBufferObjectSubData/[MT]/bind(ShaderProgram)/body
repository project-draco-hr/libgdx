{
  GL20 gl=Gdx.gl20;
  gl.glBindBuffer(GL20.GL_ARRAY_BUFFER,bufferHandle);
  if (isDirty) {
    byteBuffer.limit(buffer.limit() * 4);
    gl.glBufferSubData(GL11.GL_ARRAY_BUFFER,0,byteBuffer.limit(),byteBuffer);
    isDirty=false;
  }
  int numAttributes=attributes.size();
  for (int i=0; i < numAttributes; i++) {
    VertexAttribute attribute=attributes.get(i);
    shader.enableVertexAttribute(attribute.alias);
    int colorType=GL20.GL_FLOAT;
    boolean normalize=false;
    if (attribute.usage == Usage.ColorPacked) {
      colorType=GL20.GL_UNSIGNED_BYTE;
      normalize=true;
    }
    shader.setVertexAttribute(attribute.alias,attribute.numComponents,colorType,normalize,attributes.vertexSize,attribute.offset);
  }
  isBound=true;
}
