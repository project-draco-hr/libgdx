{
  String colorStr=params.get("color");
  if (colorStr == null) {
    throw new IllegalArgumentException("color needs to be defined");
  }
  int offsetX=parseInt(params.get("offsetX"),0);
  int offsetY=parseInt(params.get("offsetY"),0);
  int underlineOffset=parseInt(params.get("underlineOffset"),0);
  Color color=Color.parserColor(colorStr);
  if (color == null) {
    throw new IllegalArgumentException("unknown color name");
  }
  FontState p=new FontState(cond,color,offsetX,offsetY,underlineOffset);
  return p;
}
