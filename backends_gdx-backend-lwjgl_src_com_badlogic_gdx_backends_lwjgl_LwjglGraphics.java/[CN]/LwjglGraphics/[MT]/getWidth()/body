{
  if (canvas != null)   return canvas.getWidth();
 else   return config.width;
}
