{
  Array<AssetDescriptor> dependencies=new Array<AssetDescriptor>();
  try {
    XmlReader reader=new XmlReader();
    Element root=reader.parse(Gdx.files.internal(fileName));
    if (map == null) {
      map=new Map();
      loadProperties(root,map.getProperties());
    }
    MapProperties properties=map.getProperties();
    atlasFile=properties.get("atlas","",String.class);
    pathRoot=properties.get("assetRoot","data",String.class);
    if (!atlasFile.isEmpty()) {
      dependencies.add(new AssetDescriptor(atlasFile,TextureAtlas.class));
    }
 else {
      Array<Element> elements=root.getChildrenByNameRecursively("Item");
      for (int i=0; i < elements.size; ++i) {
        Element element=elements.get(i);
        if (element.getAttribute("xsi:type","").equals("TextureItem")) {
          String[] pathParts=element.getChildByName("texture_filename").getText().split("\\\\");
          dependencies.add(new AssetDescriptor(pathRoot + "/" + pathParts[pathParts.length - 1],Texture.class));
        }
      }
    }
  }
 catch (  Exception e) {
    throw new GdxRuntimeException("Couldn't load dependencies of Gleed map '" + fileName + "'",e);
  }
  return dependencies;
}
