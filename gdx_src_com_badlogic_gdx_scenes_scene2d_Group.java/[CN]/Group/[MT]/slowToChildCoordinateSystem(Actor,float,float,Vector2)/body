{
  final float cos=(float)Math.cos((float)Math.toRadians(child.rotation));
  final float sin=(float)Math.sin((float)Math.toRadians(child.rotation));
  float refX=-sin * child.refX + cos * child.refY;
  float refY=cos * child.refX + sin * child.refY;
  refX*=child.scaleX;
  refY*=child.scaleY;
  float px=child.x + child.refX - refX;
  float py=child.y + child.refY - refY;
  float tox=x - px;
  float toy=y - py;
  out.x=tox * cos + toy * sin;
  out.y=tox * -sin + toy * cos;
  out.x/=child.scaleX;
  out.y/=child.scaleY;
}
