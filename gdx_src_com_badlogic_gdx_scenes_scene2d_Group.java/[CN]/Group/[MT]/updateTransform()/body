{
  Matrix3 temp=worldTransform;
  if (originX != 0 || originY != 0)   localTransform.setToTranslation(originX,originY);
 else   localTransform.idt();
  if (rotation != 0)   localTransform.mul(temp.setToRotation(rotation));
  if (scaleX != 1 || scaleY != 1)   localTransform.mul(temp.setToScaling(scaleX,scaleY));
  if (originX != 0 || originY != 0)   localTransform.mul(temp.setToTranslation(-originX,-originY));
  localTransform.trn(x,y);
  Group parentGroup=parent;
  while (parentGroup != null) {
    if (parentGroup.transform)     break;
    parentGroup=parentGroup.parent;
  }
  if (parentGroup != null) {
    worldTransform.set(parentGroup.worldTransform);
    worldTransform.mul(localTransform);
  }
 else {
    worldTransform.set(localTransform);
  }
  batchTransform.set(worldTransform);
  return batchTransform;
}
