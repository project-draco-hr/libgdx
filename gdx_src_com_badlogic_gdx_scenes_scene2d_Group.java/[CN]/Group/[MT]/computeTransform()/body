{
  Matrix3 temp=worldTransform;
  float originX=getOriginX();
  float originY=getOriginY();
  float rotation=getRotation();
  float scaleX=getScaleX();
  float scaleY=getScaleY();
  if (originX != 0 || originY != 0)   localTransform.setToTranslation(originX,originY);
 else   localTransform.idt();
  if (rotation != 0)   localTransform.rotate(rotation);
  if (scaleX != 1 || scaleY != 1)   localTransform.scale(scaleX,scaleY);
  if (originX != 0 || originY != 0)   localTransform.translate(-originX,-originY);
  localTransform.trn(getX(),getY());
  Group parentGroup=getParent();
  while (parentGroup != null) {
    if (parentGroup.transform)     break;
    parentGroup=parentGroup.getParent();
  }
  if (parentGroup != null) {
    worldTransform.set(parentGroup.worldTransform);
    worldTransform.mul(localTransform);
  }
 else {
    worldTransform.set(localTransform);
  }
  batchTransform.set(worldTransform);
  return batchTransform;
}
