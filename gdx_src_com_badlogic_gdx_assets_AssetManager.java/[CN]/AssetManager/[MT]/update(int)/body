{
  long endTime=System.nanoTime() + millis * 1000;
  while (true) {
    boolean done=update();
    if (done || System.currentTimeMillis() > endTime)     return done;
    Thread.yield();
  }
}
