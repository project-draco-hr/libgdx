{
  long endTime=System.currentTimeMillis() + millis;
  while (true) {
    boolean done=update();
    if (done || System.currentTimeMillis() > endTime)     return done;
    Thread.yield();
  }
}
