{
  if (bytes.length < samples.length * 2)   bytes=new byte[samples.length * 2];
  for (int i=offset, j=0; i < offset + numSamples; i++, j+=2) {
    short value=samples[i];
    bytes[j + 1]=(byte)(value & 0xff);
    bytes[j]=(byte)(value >> 8);
  }
  int writtenBytes=line.write(bytes,0,numSamples * 2);
  while (writtenBytes != numSamples * 2)   writtenBytes+=line.write(bytes,writtenBytes,numSamples * 2 - writtenBytes);
}
