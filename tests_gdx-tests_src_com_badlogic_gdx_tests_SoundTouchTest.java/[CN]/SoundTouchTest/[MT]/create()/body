{
  FileHandle externalFile=Gdx.files.external("tmp/test.ogg");
  Gdx.files.internal(FILE).copyTo(externalFile);
  decoder=new VorbisDecoder(externalFile);
  Gdx.app.log("SoundTouchTest","channels: " + decoder.getChannels() + ", rate: "+ decoder.getRate()+ ", length: "+ decoder.getLength());
  device=Gdx.audio.newAudioDevice(decoder.getRate(),decoder.getChannels() == 1 ? true : false);
  soundTouch=new SoundTouch();
  soundTouch.setChannels(decoder.getChannels());
  soundTouch.setSampleRate(decoder.getRate());
  soundTouch.setPitchSemiTones(2);
  Thread playbackThread=new Thread(new Runnable(){
    @Override public void run(){
      short[] samples=new short[2048];
      int readSamples=0;
      while ((readSamples=decoder.readSamples(samples,0,samples.length)) > 0) {
        soundTouch.putSamples(samples,0,readSamples / decoder.getChannels());
      }
      while ((readSamples=soundTouch.receiveSamples(samples,0,samples.length / decoder.getChannels())) > 0) {
        device.writeSamples(samples,0,readSamples * decoder.getChannels());
      }
    }
  }
);
  playbackThread.setDaemon(true);
  playbackThread.start();
}
