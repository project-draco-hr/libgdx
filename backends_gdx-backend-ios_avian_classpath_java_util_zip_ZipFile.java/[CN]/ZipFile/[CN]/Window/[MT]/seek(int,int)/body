{
  int fileLength=(int)file.length();
  if (length > data.length) {
    throw new IllegalArgumentException("length " + length + " greater than buffer length "+ data.length);
  }
  if (start < 0) {
    throw new IllegalArgumentException("negative start " + start);
  }
  if (start + length > fileLength) {
    throw new IllegalArgumentException("end " + (start + length) + " greater than file length "+ fileLength);
  }
  if (start < this.start || start + length > this.start + this.length) {
    this.length=Math.min(data.length,fileLength);
    this.start=start - ((this.length - length) / 2);
    if (this.start < 0) {
      this.start=0;
    }
 else     if (this.start + this.length > fileLength) {
      this.start=fileLength - this.length;
    }
    file.seek(this.start);
    file.readFully(data,0,this.length);
  }
  return start - this.start;
}
