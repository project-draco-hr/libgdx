{
  if (this.program != null)   throw new GdxRuntimeException("Already initialized");
  if (!program.isCompiled())   throw new GdxRuntimeException(program.getLog());
  this.program=program;
  for (  Input input : inputs) {
    if (input.compare(materialMask,vertexMask,userMask)) {
      if (input.scope == GLOBAL_UNIFORM) {
        input.location=program.fetchUniformLocation(input.name,false);
        if (input.location >= 0 && input.setter != null)         globalUniforms.add(input);
      }
 else       if (input.scope == LOCAL_UNIFORM) {
        input.location=program.fetchUniformLocation(input.name,false);
        if (input.location >= 0 && input.setter != null)         localUniforms.add(input);
      }
 else       if (input.scope == VERTEX_ATTRIBUTE) {
        input.location=program.getAttributeLocation(input.name);
        if (input.location >= 0)         vertexAttributes.add(input);
      }
 else       input.location=-1;
    }
 else     input.location=-1;
  }
}
