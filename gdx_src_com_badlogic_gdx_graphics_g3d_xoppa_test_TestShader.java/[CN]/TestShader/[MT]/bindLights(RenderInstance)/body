{
  for (int i=0; i < lightsCount; i++) {
    final int loc=lightsLoc + i * lightSize;
    if (instance.lights.length <= i) {
      if (currentLights[i] != null) {
        program.setUniformf(loc + lightPowerOffset,0f);
        currentLights[i]=null;
      }
    }
 else {
      if (currentLights[i] != instance.lights[i]) {
        program.setUniformf(loc,instance.lights[i].color);
        program.setUniformf(loc + lightPositionOffset,instance.lights[i].position);
        program.setUniformf(loc + lightPowerOffset,instance.lights[i].power);
        currentLights[i]=instance.lights[i];
      }
    }
  }
}
