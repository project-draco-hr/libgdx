{
  int count=-1;
  while ((count=channel.read(inBuf)) > 0) {
    System.out.println(myIndex + ": read " + count);
  }
  inBuf.flip();
  fos.write(inBuf.array(),inBuf.arrayOffset() + inBuf.position(),inBuf.remaining());
  inBuf.position(inBuf.limit());
  if (count < 0) {
    System.out.println(myIndex + ": Closing channel");
    fos.close();
    channel.close();
  }
  inBuf.compact();
}
