{
  try {
    graphics.setupDisplay();
    listener.create();
    listener.resize(Math.max(1,graphics.getWidth()),Math.max(1,graphics.getHeight()));
  }
 catch (  Exception ex) {
    stopped();
    throw new GdxRuntimeException(ex);
  }
  EventQueue.invokeLater(new Runnable(){
    int lastWidth=Math.max(1,graphics.getWidth());
    int lastHeight=Math.max(1,graphics.getHeight());
    public void run(){
      if (!running)       return;
      canvas.setCursor(cursor);
      graphics.updateTime();
synchronized (runnables) {
        executedRunnables.clear();
        executedRunnables.addAll(runnables);
        runnables.clear();
        for (int i=0; i < executedRunnables.size(); i++) {
          try {
            executedRunnables.get(i).run();
          }
 catch (          Throwable t) {
            t.printStackTrace();
          }
        }
      }
      input.update();
      int width=Math.max(1,graphics.getWidth());
      int height=Math.max(1,graphics.getHeight());
      if (lastWidth != width || lastHeight != height) {
        lastWidth=width;
        lastHeight=height;
        Gdx.gl.glViewport(0,0,lastWidth,lastHeight);
        resize(width,height);
        listener.resize(width,height);
      }
      input.processEvents();
      listener.render();
      audio.update();
      Display.update();
      if (graphics.vsync)       Display.sync(60);
      if (running && !Display.isCloseRequested())       EventQueue.invokeLater(this);
 else       stopped();
    }
  }
);
}
