{
  if (!running)   return;
  setGlobals();
  canvas.setCursor(cursor);
  graphics.updateTime();
  int width=Math.max(1,graphics.getWidth());
  int height=Math.max(1,graphics.getHeight());
  if (lastWidth != width || lastHeight != height) {
    lastWidth=width;
    lastHeight=height;
    Gdx.gl.glViewport(0,0,lastWidth,lastHeight);
    resize(width,height);
    listener.resize(width,height);
  }
synchronized (runnables) {
    executedRunnables.clear();
    executedRunnables.addAll(runnables);
    runnables.clear();
    while (executedRunnables.size() > 0) {
      try {
        executedRunnables.remove(executedRunnables.size() - 1).run();
      }
 catch (      Throwable t) {
        t.printStackTrace();
      }
    }
  }
  input.processEvents();
  if (running) {
    graphics.frameId++;
    listener.render();
    if (audio != null) {
      audio.update();
    }
  }
}
